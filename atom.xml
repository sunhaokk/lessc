<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Da&#39;sBlog</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://sunhao.win/"/>
  <updated>2017-03-07T06:24:56.000Z</updated>
  <id>http://sunhao.win/</id>
  
  <author>
    <name>Sun Hao</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>php函数参数类和接口</title>
    <link href="http://sunhao.win/2017/03/07/php-class-type-declaration/"/>
    <id>http://sunhao.win/2017/03/07/php-class-type-declaration/</id>
    <published>2017-03-07T05:46:37.000Z</published>
    <updated>2017-03-07T06:24:56.000Z</updated>
    
    <content type="html"><![CDATA[<p>参数为类的实例<br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span> </span>&#123;&#125;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">D</span> <span class="keyword">extends</span> <span class="title">C</span> </span>&#123;&#125;</div><div class="line"></div><div class="line"><span class="comment">// This doesn't extend C.</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">E</span> </span>&#123;&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span><span class="params">(C $c)</span> </span>&#123;</div><div class="line">    <span class="keyword">echo</span> get_class($c).<span class="string">"\n"</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">f(<span class="keyword">new</span> C);</div><div class="line">f(<span class="keyword">new</span> D);</div><div class="line">f(<span class="keyword">new</span> E);</div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure></p>
<p>输出为</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line"></div><div class="line">C</div><div class="line">D</div><div class="line"></div><div class="line">Fatal error: Uncaught TypeError: Argument <span class="number">1</span> passed to f() must be an instance of C, instance of E given, called in - on line <span class="number">14</span> <span class="keyword">and</span> defined in -:<span class="number">8</span></div><div class="line">Stack trace:</div><div class="line"><span class="comment">#0 -(14): f(Object(E))</span></div><div class="line"><span class="comment">#1 &#123;main&#125;</span></div><div class="line">  thrown in - on line <span class="number">8</span></div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<a id="more"></a>
<p>参数为接口的实现</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line"><span class="class"><span class="keyword">interface</span> <span class="title">I</span> </span>&#123; <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">f</span><span class="params">()</span></span>; &#125;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span> <span class="keyword">implements</span> <span class="title">I</span> </span>&#123; <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">f</span><span class="params">()</span> </span>&#123;&#125; &#125;</div><div class="line"></div><div class="line"><span class="comment">// This doesn't implement I.</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">E</span> </span>&#123;&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span><span class="params">(I $i)</span> </span>&#123;</div><div class="line">    <span class="keyword">echo</span> get_class($i).<span class="string">"\n"</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">f(<span class="keyword">new</span> C);</div><div class="line">f(<span class="keyword">new</span> E);</div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<p>输出为</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line">C</div><div class="line">PHP Catchable fatal error:  Argument <span class="number">1</span> passed to f() must implement <span class="class"><span class="keyword">interface</span> <span class="title">I</span>, <span class="title">instance</span> <span class="title">of</span> <span class="title">E</span> <span class="title">given</span>, <span class="title">called</span> <span class="title">in</span> /<span class="title">code</span>/<span class="title">main</span>.<span class="title">php</span> <span class="title">on</span> <span class="title">line</span> 13 <span class="title">and</span> <span class="title">defined</span> <span class="title">in</span> /<span class="title">code</span>/<span class="title">main</span>.<span class="title">php</span> <span class="title">on</span> <span class="title">line</span> 8</span></div><div class="line">?&gt;</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;参数为类的实例&lt;br&gt;&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;&amp;lt;?php&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;C&lt;/span&gt; &lt;/span&gt;&amp;#123;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;D&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;C&lt;/span&gt; &lt;/span&gt;&amp;#123;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// This doesn&#39;t extend C.&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;E&lt;/span&gt; &lt;/span&gt;&amp;#123;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(C $c)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;echo&lt;/span&gt; get_class($c).&lt;span class=&quot;string&quot;&gt;&quot;\n&quot;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;f(&lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; C);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;f(&lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; D);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;f(&lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; E);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;?&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;输出为&lt;/p&gt;
&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;&amp;lt;?php&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;C&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;D&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Fatal error: Uncaught TypeError: Argument &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; passed to f() must be an instance of C, instance of E given, called in - on line &lt;span class=&quot;number&quot;&gt;14&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;and&lt;/span&gt; defined in -:&lt;span class=&quot;number&quot;&gt;8&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Stack trace:&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#0 -(14): f(Object(E))&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#1 &amp;#123;main&amp;#125;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  thrown in - on line &lt;span class=&quot;number&quot;&gt;8&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;?&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="php" scheme="http://sunhao.win/categories/php/"/>
    
    
      <category term="php参数" scheme="http://sunhao.win/tags/php%E5%8F%82%E6%95%B0/"/>
    
  </entry>
  
  <entry>
    <title>webpack热拔插教程hmr</title>
    <link href="http://sunhao.win/2017/03/07/webpack-hmr-tutorial/"/>
    <id>http://sunhao.win/2017/03/07/webpack-hmr-tutorial/</id>
    <published>2017-03-07T00:50:58.000Z</published>
    <updated>2017-03-07T06:17:26.000Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://andrewhfarmer.com/webpack-hmr-tutorial/" target="_blank" rel="external">http://andrewhfarmer.com/webpack-hmr-tutorial/</a><br>Struggling to set up HMR with Webpack?</p>
<p>Are you finding the Webpack documentation to be lacking - particularly in the HMR section? Does it seem like they’ve left out some important parts?</p>
<p>If so, read on! We’ll fill in the gaps together.</p>
<p>By the way, HMR stands for ‘Hot Module Replacement’, sometimes called ‘hot module swapping’. It’s a Webpack feature that updates your JavaScript in-place without a browser refresh - whenever you make code changes. I love it because it enables a very fast developer workflow.<br>HMR Myths<br>First let’s get a couple myths about HMR out of the way.<br><a id="more"></a><br>Myth: HMR is only for React<br>Not true - it usually just takes 3 lines of code to enable HMR in arbitrary JavaScript. This Tutorial doesn’t even mention React - I’ll cover HMR in React in a subsequent post.</p>
<p>Myth: HMR is only for ‘advanced’ users<br>Not true. Without good documentation, HMR is difficult for beginners and advanced users alike. With the right information (this article), HMR can be enabled with very minor changes to config/code.</p>
<p>Myth: HMR is the same as ‘live reload’<br>Not true. Live reload is when the browser automatically refreshes the page whenever you make a code change. HMR is faster because it updates code in-place without refreshing.</p>
<p>2 Steps to HMR Success<br>There are 2 steps to enabling HMR: config changes and code changes.</p>
<ol>
<li><p>Config / Project Setup<br>There are 3 ways to configure your project for HMR. I go into each way in detail in Part 1. Pick the way that’s right for you and either use the provided github repository, or follow the directions to adapt your existing code base.</p>
</li>
<li><p>JavaScript / HMR API<br>To get HMR to work you have to add a little bit of extra code to your JavaScript. In the simplest case this is just 3 lines of code. I’ll show you everything you need to add for your use-case in Part 2.</p>
</li>
</ol>
<p>Part 1: Configuring Your Project<br>There are exactly 3 ways that you can configure your HMR project. Let’s go through each one. I’ll help you pick which one to use in the next section.</p>
<ol>
<li><p>webpack-dev-server CLI<br>Run the webpack-dev-server on the command-line. With this approach you don’t need to change your webpack.config.js file, so it’s the simplest.</p>
</li>
<li><p>webpack-dev-server API<br>Run WebpackDevServer from a node.js script. Requires some additions to your webpack.config.js.</p>
</li>
<li><p>webpack-hot-middleware w/ express<br>webpack-hot-middleware is used for running a webpack dev server with HMR inside an express server.</p>
</li>
</ol>
<p>The Non-Way<br>If you are used to running the webpack CLI or the Webpack API (without express or webpack-dev-server), then you’ll have to change how you do things a little bit. HMR requires a server to work. To find out why, read my understanding HMR post.</p>
<p>But how do I choose?<br>Follow this simple guide to pick one of the 3 ways above.</p>
<p>If you are using a task runner like grunt or gulp you’ll want to use the webpack-dev-server API. You can run the server from one of your gulp/grunt tasks.</p>
<p>If you use your own node scripts to run webpack, you’ll also want to use the webpack-dev-server API.</p>
<p>If you use express to host your site: use webpack-hot-middleware. It will be integrated with your express server, so you won’t have to run another server for your bundled JS.</p>
<p>If none of the above apply to you or you just want the simplest possible setup: use the webpack-dev-server CLI. It requires no configuration.</p>
<p>Okay, I picked one, but how do I start?<br>Glad you asked! Below is a separate ‘Configuring X’ section for each of the 3 approaches.</p>
<p>Scroll forward to the approach you decided to use, follow the directions, and then scroll down to Part 2.</p>
<ol>
<li>Configuring webpack-dev-server CLI<br>Read this section if you’ve decided to use the webpack-dev-server CLI. Otherwise, scroll to the next section.</li>
</ol>
<p>If you are starting a new project, use my webpack HMR with webpack-dev-server CLI starter project (wow that’s a mouthful). It has a README and lots of comments to explain what’s going on.</p>
<p>If you are working with an existing project: just make sure you have a valid webpack.config.js and run webpack-dev-server.</p>
<p>Here’s an example command:</p>
<p>webpack-dev-server –content-base=www –inline –watch –hot<br>You may want to modify the above command for your use-case based on the CLI Docs.</p>
<p>That’s it! When you use the webpack-dev-server CLI it does all the configuration for you.</p>
<p>Gotcha: When using this approach, make sure your webpack.config.js does NOT contain any references to webpack-dev-server or HotModuleReplacementPlugin. You’ll get errors if you do.</p>
<ol>
<li>Configuring WebpackDevServer API<br>Read this section if you’ve decided to use the WebpackDevServer API. Otherwise, scroll to the next section.</li>
</ol>
<p>If you are starting a new project, use my webpack HMR with WebpackDevServer API starter project. It has a README and lots of comments to explain what’s going on.</p>
<p>If you are working with an existing project, you’ll have to make 3 changes:</p>
<p>Change #1: Add entry points to your webpack.config.js. Here’s an example. You need webpack/hot/dev-server and webpack-dev-server/client as shown, but index.js should be the name of your usual entry point.</p>
<p>entry: [<br>  ‘./index.js’,<br>  ‘webpack/hot/dev-server’,<br>  ‘webpack-dev-server/client?<a href="http://localhost:8080/" target="_blank" rel="external">http://localhost:8080/</a>‘,<br>],<br>Change #2: Add the HotModuleReplacementPlugin to your your webpack.config.js, like this:</p>
<p>plugins: [<br>  new webpack.HotModuleReplacementPlugin(),<br>]<br>For a complete example, see the starter project webpack.config.js.</p>
<p>Change #3: Run WebpackDevServer with the hot: true option. For an example, see the starter project server.js.</p>
<ol>
<li>Configuring webpack-hot-middleware &amp; express<br>Read this section if you’ve decided to use express and webpack-hot-middleware. Otherwise, scroll on to Part 2.</li>
</ol>
<p>If you are starting a new project, use my webpack HMR with webpack-hot-middleware &amp; express starter project. It has a README and lots of comments to explain what’s going on.</p>
<p>If you are working with an existing express project, you’ll need to do 3 things:</p>
<p>Change #1: Install webpack-hot-middleware and webpack-dev-middleware. I’m assuming you already have webpack and express.</p>
<p>npm install –save-dev webpack-hot-middleware webpack-dev-middleware<br>Change #2: Adjust your webpack.config.js to look similar to this. The important bits are the entry and plugins section. You’ll want all the plugins I have listed:</p>
<p>var path = require(‘path’);<br>var webpack = require(‘webpack’);</p>
<p>var config = {<br>  context: path.join(<strong>dirname, ‘js’),<br>  entry: [<br>    ‘webpack-hot-middleware/client?path=/</strong>webpack_hmr&amp;timeout=20000’,<br>    ‘./index.js’,<br>  ],<br>  output: {<br>    path: path.join(__dirname, ‘www’),<br>    filename: ‘bundle.js’,<br>    publicPath: ‘/assets/‘,<br>  },<br>  plugins: [<br>    new webpack.optimize.OccurenceOrderPlugin(),<br>    new webpack.HotModuleReplacementPlugin(),<br>    new webpack.NoErrorsPlugin()<br>  ]<br>};<br>module.exports = config;<br>Change #3: Add the middleware to your express server.</p>
<p>Add these requires:</p>
<p>var webpackDevMiddleware = require(“webpack-dev-middleware”);<br>var webpackHotMiddleware = require(“webpack-hot-middleware”);<br>And these middleware .use statements:</p>
<p>app.use(webpackDevMiddleware(compiler, {<br>  hot: true,<br>  filename: ‘bundle.js’,<br>  publicPath: ‘/assets/‘,<br>  stats: {<br>    colors: true,<br>  },<br>  historyApiFallback: true,<br>}));</p>
<p>app.use(webpackHotMiddleware(compiler, {<br>  log: console.log,<br>  path: ‘/__webpack_hmr’,<br>  heartbeat: 10 * 1000,<br>}));<br>Part 2: Code Changes<br>Your Webpack project should now be configured for HMR. But if you fire up a browser at this point and make a code change, it won’t work. Either you won’t see the update, or you’ll get a full browser refresh.</p>
<p>Why isn’t it working yet? Webpack doesn’t know when it is acceptable to reload a particular JS file.</p>
<p>To let Webpack know which files can be updated, we’ll use the HMR JavaScript API a.k.a. the module.hot API.</p>
<p>If you used any of my github starter projects, they are already using the module.hot API and you will see changes reflected immediately.<br>The Simple Way<br>To start, find your entry point (often called index.js or main.js) and add the following to the end:</p>
<p>if (module.hot) {<br>  module.hot.accept();<br>}<br>This tells Webpack that this file and all of its dependencies can be replaced.</p>
<p>Now make a code change that you could see the effect of onscreen. You SHOULD have seen an update!</p>
<p>For many projects, that’s all there is to it.</p>
<p>The Catch: Side Effects<br>If any of your files produce side effects when they run, for instance if they add elements to the DOM, then you’ll need to use module.hot.dispose to dispose of those side effects.</p>
<p>Why? If you don’t, when Webpack reloads the module, all the side effects will be repeated.</p>
<p>Here’s an example, box-creator.js:</p>
<p>var sideEffectNode = document.createElement(‘div’);<br>sideEffectNode.textContent = ‘Side Effect’;<br>document.body.appendChild(sideEffectNode);</p>
<p>// Remove the most recently-added <div> so that when the code runs again and<br>// adds a new <div>, we don’t end up with duplicate divs.<br>if (module.hot) {<br>  module.hot.dispose(function() {<br>    sideEffectNode.parentNode.removeChild(sideEffectNode);<br>  });<br>}<br>This is a file that simply adds a <div> to the DOM whenever it is loaded. It uses module.hot.dispose to remove the <div> when it is unloaded by the Webpack HMR Runtime.</div></div></div></div></p>
<p>Conclusion<br>That’s all you need to know to get HMR working. If you want to dig deeper to solidify your understanding, read my article on understanding HMR.</p>
<p>Coming soon: next I’ll post about how to apply HMR to your React project. Sign up for my list to be notified when that comes out!</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;http://andrewhfarmer.com/webpack-hmr-tutorial/&quot;&gt;http://andrewhfarmer.com/webpack-hmr-tutorial/&lt;/a&gt;&lt;br&gt;Struggling to set up HMR with Webpack?&lt;/p&gt;
&lt;p&gt;Are you finding the Webpack documentation to be lacking - particularly in the HMR section? Does it seem like they’ve left out some important parts?&lt;/p&gt;
&lt;p&gt;If so, read on! We’ll fill in the gaps together.&lt;/p&gt;
&lt;p&gt;By the way, HMR stands for ‘Hot Module Replacement’, sometimes called ‘hot module swapping’. It’s a Webpack feature that updates your JavaScript in-place without a browser refresh - whenever you make code changes. I love it because it enables a very fast developer workflow.&lt;br&gt;HMR Myths&lt;br&gt;First let’s get a couple myths about HMR out of the way.&lt;br&gt;
    
    </summary>
    
      <category term="webpack" scheme="http://sunhao.win/categories/webpack/"/>
    
    
      <category term="webpack" scheme="http://sunhao.win/tags/webpack/"/>
    
      <category term="hmr" scheme="http://sunhao.win/tags/hmr/"/>
    
      <category term="教程" scheme="http://sunhao.win/tags/%E6%95%99%E7%A8%8B/"/>
    
      <category term="热拔插" scheme="http://sunhao.win/tags/%E7%83%AD%E6%8B%94%E6%8F%92/"/>
    
  </entry>
  
  <entry>
    <title>laravel学习零散知识点</title>
    <link href="http://sunhao.win/2017/03/06/laravel-study/"/>
    <id>http://sunhao.win/2017/03/06/laravel-study/</id>
    <published>2017-03-06T08:22:41.000Z</published>
    <updated>2017-03-07T06:20:31.366Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">&#123;!! !!&#125; 相当于 <span class="meta">&lt;?php</span> <span class="keyword">echo</span> $value; <span class="meta">?&gt;</span></div><div class="line">&#123;&#123; &#125;&#125; 相当于 <span class="meta">&lt;?php</span> <span class="keyword">echo</span> htmlspecialchars($value); <span class="meta">?&gt;</span></div><div class="line"></div><div class="line">csrf_field()</div><div class="line"></div><div class="line">csrf_field 函数生成一个包含 CSRF 令牌值的 HTML 隐藏域，例如，使用Blade语法示例如下：</div><div class="line"></div><div class="line">&#123;!! csrf_field() !!&#125;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">csrf_token()</div><div class="line"></div><div class="line">csrf_token 函数获取当前 CSRF 令牌的值：</div><div class="line"></div><div class="line">$token = csrf_token();</div></pre></td></tr></table></figure>
<a id="more"></a>]]></content>
    
    <summary type="html">
    
      &lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&amp;#123;!! !!&amp;#125; 相当于 &lt;span class=&quot;meta&quot;&gt;&amp;lt;?php&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;echo&lt;/span&gt; $value; &lt;span class=&quot;meta&quot;&gt;?&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#123;&amp;#123; &amp;#125;&amp;#125; 相当于 &lt;span class=&quot;meta&quot;&gt;&amp;lt;?php&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;echo&lt;/span&gt; htmlspecialchars($value); &lt;span class=&quot;meta&quot;&gt;?&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;csrf_field()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;csrf_field 函数生成一个包含 CSRF 令牌值的 HTML 隐藏域，例如，使用Blade语法示例如下：&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#123;!! csrf_field() !!&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;csrf_token()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;csrf_token 函数获取当前 CSRF 令牌的值：&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;$token = csrf_token();&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="laravel" scheme="http://sunhao.win/categories/laravel/"/>
    
    
      <category term="学习" scheme="http://sunhao.win/tags/%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>git文件状态</title>
    <link href="http://sunhao.win/2017/03/06/git-filestatus/"/>
    <id>http://sunhao.win/2017/03/06/git-filestatus/</id>
    <published>2017-03-06T00:54:46.000Z</published>
    <updated>2017-03-06T01:06:52.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://ojlt0g866.bkt.clouddn.com/blog/20170306/085148199.png" alt="mark"><br>灰色箭头不参与git快照。</p>
<ol>
<li>默认git有4种状态</li>
<li>untracked  未跟踪 </li>
<li>unmodified 未修改</li>
<li>modified 修改</li>
<li>staged  暂存区</li>
</ol>
<h3 id="其中我们工作区中只有-未修改-和修改。"><a href="#其中我们工作区中只有-未修改-和修改。" class="headerlink" title="其中我们工作区中只有  未修改 和修改。"></a>其中我们工作区中只有  未修改 和修改。</h3><h3 id="初始化，和commit后-所有为跟踪的文件都是-未修改的。"><a href="#初始化，和commit后-所有为跟踪的文件都是-未修改的。" class="headerlink" title="初始化，和commit后  所有为跟踪的文件都是 未修改的。"></a>初始化，和commit后  所有为跟踪的文件都是 未修改的。</h3><p>运行了 git add 之后又作了修订的文件，需要重新运行 git add 把最新版本重新暂存起来：<br><a id="more"></a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://ojlt0g866.bkt.clouddn.com/blog/20170306/085148199.png&quot; alt=&quot;mark&quot;&gt;&lt;br&gt;灰色箭头不参与git快照。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;默认git有4种状态&lt;/li&gt;
&lt;li&gt;untracked  未跟踪 &lt;/li&gt;
&lt;li&gt;unmodified 未修改&lt;/li&gt;
&lt;li&gt;modified 修改&lt;/li&gt;
&lt;li&gt;staged  暂存区&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;其中我们工作区中只有-未修改-和修改。&quot;&gt;&lt;a href=&quot;#其中我们工作区中只有-未修改-和修改。&quot; class=&quot;headerlink&quot; title=&quot;其中我们工作区中只有  未修改 和修改。&quot;&gt;&lt;/a&gt;其中我们工作区中只有  未修改 和修改。&lt;/h3&gt;&lt;h3 id=&quot;初始化，和commit后-所有为跟踪的文件都是-未修改的。&quot;&gt;&lt;a href=&quot;#初始化，和commit后-所有为跟踪的文件都是-未修改的。&quot; class=&quot;headerlink&quot; title=&quot;初始化，和commit后  所有为跟踪的文件都是 未修改的。&quot;&gt;&lt;/a&gt;初始化，和commit后  所有为跟踪的文件都是 未修改的。&lt;/h3&gt;&lt;p&gt;运行了 git add 之后又作了修订的文件，需要重新运行 git add 把最新版本重新暂存起来：&lt;br&gt;
    
    </summary>
    
      <category term="git" scheme="http://sunhao.win/categories/git/"/>
    
    
      <category term="git" scheme="http://sunhao.win/tags/git/"/>
    
  </entry>
  
  <entry>
    <title>window命令mklink 创建符号链接 硬链接 目录联结</title>
    <link href="http://sunhao.win/2017/03/05/window-mklink/"/>
    <id>http://sunhao.win/2017/03/05/window-mklink/</id>
    <published>2017-03-05T03:15:53.000Z</published>
    <updated>2017-03-05T05:15:41.894Z</updated>
    
    <content type="html"><![CDATA[<p>最近研究mklink 发现国内很多文档认识有错误  或者不充分，在此补充下。</p>
<ol>
<li>符号链接 用的比较多  也就是我们的快捷方式</li>
<li>硬链接  用的很少  可以防止误删，省空间等、</li>
<li>目录联结   一般用于共享目录<h3 id="链接的本质是创建一个指向原文件的路径"><a href="#链接的本质是创建一个指向原文件的路径" class="headerlink" title="链接的本质是创建一个指向原文件的路径"></a>链接的本质是创建一个指向原文件的路径</h3></li>
</ol>
<p><img src="http://ojlt0g866.bkt.clouddn.com/blog/20170305/130909564.png" alt="mark"><br>我们的文件其实是存在磁盘空间中， 文件名指向磁盘空间，最后访问文件名  访问到它所指向的空间。</p>
<p><img src="http://ojlt0g866.bkt.clouddn.com/blog/20170305/112747867.png" alt="mark"></p>
<ol>
<li><p>符号链接<br>mklink /d</p>
<p>和快捷方式几乎。但与其不同的是快捷方式是.link后缀的文件。</p>
<p>删除原文件，这种链接就无效了</p>
<a id="more"></a></li>
<li><p>硬链接(hard link)<br>mklink /h</p>
<p>指向到原文件空间中所在地址。只能用于文件，<br>其实就是又新建了个文件名，指向共同的磁盘空间。所以删除其中一个文件名，不影响另一个。</p>
<p>与copy不同的是，copy实际是创建了两个不同的磁盘空间。</p>
</li>
</ol>
<ol>
<li><p>目录联接(junction)<br>mklink /j<br>所谓联结就是相当于一个中间件。<br>充当中介</p>
<p>只能用于目录。而且它用的相对路径，所以复制到别的文件夹是无效的。</p>
<p>这个用来做目录共享。</p>
<p>比如说 我想让b电脑访问  a电脑的目录aa<br>但是我就想让他访问一会。所以我可以创建个目录联结。然后共享这个目录。  等b访问完，直接就可以删掉这个目录。</p>
</li>
</ol>
<p>总的来说链接的本质是为了管理方便，充分利用磁盘空间，避免冗余。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;最近研究mklink 发现国内很多文档认识有错误  或者不充分，在此补充下。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;符号链接 用的比较多  也就是我们的快捷方式&lt;/li&gt;
&lt;li&gt;硬链接  用的很少  可以防止误删，省空间等、&lt;/li&gt;
&lt;li&gt;目录联结   一般用于共享目录&lt;h3 id=&quot;链接的本质是创建一个指向原文件的路径&quot;&gt;&lt;a href=&quot;#链接的本质是创建一个指向原文件的路径&quot; class=&quot;headerlink&quot; title=&quot;链接的本质是创建一个指向原文件的路径&quot;&gt;&lt;/a&gt;链接的本质是创建一个指向原文件的路径&lt;/h3&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&quot;http://ojlt0g866.bkt.clouddn.com/blog/20170305/130909564.png&quot; alt=&quot;mark&quot;&gt;&lt;br&gt;我们的文件其实是存在磁盘空间中， 文件名指向磁盘空间，最后访问文件名  访问到它所指向的空间。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://ojlt0g866.bkt.clouddn.com/blog/20170305/112747867.png&quot; alt=&quot;mark&quot;&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;符号链接&lt;br&gt;mklink /d&lt;/p&gt;
&lt;p&gt;和快捷方式几乎。但与其不同的是快捷方式是.link后缀的文件。&lt;/p&gt;
&lt;p&gt;删除原文件，这种链接就无效了&lt;/p&gt;
    
    </summary>
    
      <category term="window" scheme="http://sunhao.win/categories/window/"/>
    
    
      <category term="符号链接" scheme="http://sunhao.win/tags/%E7%AC%A6%E5%8F%B7%E9%93%BE%E6%8E%A5/"/>
    
      <category term="硬链接" scheme="http://sunhao.win/tags/%E7%A1%AC%E9%93%BE%E6%8E%A5/"/>
    
      <category term="目录联结" scheme="http://sunhao.win/tags/%E7%9B%AE%E5%BD%95%E8%81%94%E7%BB%93/"/>
    
      <category term="junction" scheme="http://sunhao.win/tags/junction/"/>
    
  </entry>
  
  <entry>
    <title>数据结构-集合论，集合,数组 第一篇</title>
    <link href="http://sunhao.win/2017/03/02/data-structure-set/"/>
    <id>http://sunhao.win/2017/03/02/data-structure-set/</id>
    <published>2017-03-02T00:55:57.000Z</published>
    <updated>2017-03-02T02:11:52.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="集合论-集合论或集论是研究集合（由一堆抽象物件构成的整体）的数学理论-包含了集合、元素和成员关系等最基本的数学概念。"><a href="#集合论-集合论或集论是研究集合（由一堆抽象物件构成的整体）的数学理论-包含了集合、元素和成员关系等最基本的数学概念。" class="headerlink" title="集合论: 集合论或集论是研究集合（由一堆抽象物件构成的整体）的数学理论,包含了集合、元素和成员关系等最基本的数学概念。"></a>集合论: 集合论或集论是研究集合（由一堆抽象物件构成的整体）的数学理论,包含了集合、元素和成员关系等最基本的数学概念。</h3><h3 id="集合（简称集）是数学中一个基本概念，它是集合论的研究对象-集合就是“一堆东西”。集合里的“东西”，叫作元素。"><a href="#集合（简称集）是数学中一个基本概念，它是集合论的研究对象-集合就是“一堆东西”。集合里的“东西”，叫作元素。" class="headerlink" title="集合（简称集）是数学中一个基本概念，它是集合论的研究对象.集合就是“一堆东西”。集合里的“东西”，叫作元素。"></a>集合（简称集）是数学中一个基本概念，它是集合论的研究对象.集合就是“一堆东西”。集合里的“东西”，叫作元素。</h3><p>集合A和B的并集，符号为A ∪ B<br>集合A和B的交集，符号为A ∩ B<br>集合U和A的相对差集，符号为U \ A<br>集合A和B的对称差，符号为A △ B或A⊕B</p>
<p>编程中的数组 是集合中的一种表现形式。</p>
<p>数组是在程序设计中，为了处理方便， 把具有相同类型的若干变量按有序的形式组织起来的一种形式。这些按序排列的同类数据元素的集合称为数组。<br>其中具有相同类型的若干变量按有序的形式组织起来的一种形式   就是我们说的成员关系。</p>
<p>①[x，y] ：中括号表示包括边界数字，即表示大于等于x小于等于y<br>②(x，y)：小括号是不包括边界，即表示大于x小于y<br>所以我们的数组 用[]来声明。而()已经被函数占用，所以不考虑。<br><a id="more"></a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;集合论-集合论或集论是研究集合（由一堆抽象物件构成的整体）的数学理论-包含了集合、元素和成员关系等最基本的数学概念。&quot;&gt;&lt;a href=&quot;#集合论-集合论或集论是研究集合（由一堆抽象物件构成的整体）的数学理论-包含了集合、元素和成员关系等最基本的数学概念。&quot; class=&quot;headerlink&quot; title=&quot;集合论: 集合论或集论是研究集合（由一堆抽象物件构成的整体）的数学理论,包含了集合、元素和成员关系等最基本的数学概念。&quot;&gt;&lt;/a&gt;集合论: 集合论或集论是研究集合（由一堆抽象物件构成的整体）的数学理论,包含了集合、元素和成员关系等最基本的数学概念。&lt;/h3&gt;&lt;h3 id=&quot;集合（简称集）是数学中一个基本概念，它是集合论的研究对象-集合就是“一堆东西”。集合里的“东西”，叫作元素。&quot;&gt;&lt;a href=&quot;#集合（简称集）是数学中一个基本概念，它是集合论的研究对象-集合就是“一堆东西”。集合里的“东西”，叫作元素。&quot; class=&quot;headerlink&quot; title=&quot;集合（简称集）是数学中一个基本概念，它是集合论的研究对象.集合就是“一堆东西”。集合里的“东西”，叫作元素。&quot;&gt;&lt;/a&gt;集合（简称集）是数学中一个基本概念，它是集合论的研究对象.集合就是“一堆东西”。集合里的“东西”，叫作元素。&lt;/h3&gt;&lt;p&gt;集合A和B的并集，符号为A ∪ B&lt;br&gt;集合A和B的交集，符号为A ∩ B&lt;br&gt;集合U和A的相对差集，符号为U \ A&lt;br&gt;集合A和B的对称差，符号为A △ B或A⊕B&lt;/p&gt;
&lt;p&gt;编程中的数组 是集合中的一种表现形式。&lt;/p&gt;
&lt;p&gt;数组是在程序设计中，为了处理方便， 把具有相同类型的若干变量按有序的形式组织起来的一种形式。这些按序排列的同类数据元素的集合称为数组。&lt;br&gt;其中具有相同类型的若干变量按有序的形式组织起来的一种形式   就是我们说的成员关系。&lt;/p&gt;
&lt;p&gt;①[x，y] ：中括号表示包括边界数字，即表示大于等于x小于等于y&lt;br&gt;②(x，y)：小括号是不包括边界，即表示大于x小于y&lt;br&gt;所以我们的数组 用[]来声明。而()已经被函数占用，所以不考虑。&lt;br&gt;
    
    </summary>
    
      <category term="数据结构" scheme="http://sunhao.win/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
    
      <category term="集合" scheme="http://sunhao.win/tags/%E9%9B%86%E5%90%88/"/>
    
      <category term="数组" scheme="http://sunhao.win/tags/%E6%95%B0%E7%BB%84/"/>
    
  </entry>
  
  <entry>
    <title>python-列表list,元组tuple,字典dict,集合set</title>
    <link href="http://sunhao.win/2017/03/02/python-list-tuple-dict-set/"/>
    <id>http://sunhao.win/2017/03/02/python-list-tuple-dict-set/</id>
    <published>2017-03-02T00:40:27.000Z</published>
    <updated>2017-03-02T02:53:45.875Z</updated>
    
    <content type="html"><![CDATA[<p>数序: 全称是数字序列，就是指数字按照一定规律所排出来的顺序。<br>序数: 表顺序的数,像第1、第2、第3。</p>
<p>序列的两个特点：<br>1.索引操作符，从序列中抓取一个特定项目<br>2.和切片操作符，获取序列的一个切片，即一部分序列</p>
<p>Python一些内置函数<br>1、cmp(A, B)：比较可为list、tuple等的A、B，A&gt;B为1，A=B为0，小于为-1<br>2、len(obj)： 计算元素个数。<br>3、max(obj)：返回元素最大值。<br>4、min(obj)：返回元素最小值。<br>5、reversed(obj): 对元素进行翻转<br>6、enumerate(obj): 遍历list的元素，返回序号及其对应的元素 for x，y in list：<br>7、zip():打包成tuple（元组），然后返回由这些tuples组成的list（列表）</p>
<p>列表、元组和字符串都是序列，字符串是字符的序列，列表和元祖是任意类型的序列</p>
<p>列表list，用中括号“[ ]”表示</p>
<p>1.任意对象的有序集合<br>列表是一组任意类型的值，按照一定顺序组合而成的<br>2.通过偏移读取<br>组成列表的值叫做元素(Elements)。每一个元素被标识一个索引，第一个索引是0，序列的功能都能实现<br>3.可变长度，异构以及任意嵌套<br>列表中的元素可以是任意类型，甚至是列表类型，也就是说列表可以嵌套<br>4.可变的序列<br>支持索引、切片、合并、删除等等操作，它们都是在原处进行修改列表<br>5.对象引用数组<br>列表可以当成普通的数组，每当用到引用时，Python总是会将这个引用指向一个对象，所以程序只需处理对象的操作。当把一个对象赋给一个数据结构元素或变量名时，Python总是会存储对象的引用，而不是对象的一个拷贝</p>
<p>#!/usr/bin/env python</p>
<p>#coding:utf-8</p>
<p>‘’’<br>FuncName: study_list.py<br>Desc: list 内建函数<br>Date: 2016-03-17 14:00<br>Author: johnny<br>‘’’</p>
<p> L.append(var)              # 追加元素，加在最后<br> L.insert(index,var)        # 在index的位置追加元素，位置就是索引<br> L.pop(var)                 # 从list中删除最后一个元素，并返回该元素<br> L.remove(var)              # 删除第一次出现的该元素<br> L.count(var)               # 该元素在列表中出现的个数<br> L.index(var)               # 该元素的位置（索引号）,无则抛异常<br> L.extend(list)             # 追加list，即合并list到L上，两个列表合并<br> L.sort()                   # 排序<br> L.reverse()                # 原地翻转列表，从前到后变成从后向前<br> l = [1,2,3,4,[‘hello’,’johnny’],’blog.csdn.net/z_johnny’]   # 创建list<br> l[1:5:2]                   # list的切片，切一部分，范围为索引[1，5)，即1、2、3、4不包括5，隔2取1个值 l[1:5:2] == [2, 4]<br> l[1]                       # list的索引，左1索引为0，右1索引为-1，l[1] == 2<br> l[4][1]                    # 列表支持嵌套，l[4][1] == ‘johnny’</p>
<p>list的官方内置函数可用dir(list)与help(list) 命令进行查看</p>
<p>元祖tuple，用小括号“( )”表示</p>
<p>1.任意对象的有序集合<br>与列表相同<br>2.通过偏移存取<br>与列表相同<br>3.属于不可变序列类型<br>类似于字符串，但元组是不可变的，不支持在列表中任何原处修改操作，不支持任何方法调用<br>4.固定长度、异构、任意嵌套<br>固定长度即元组不可变，在不被拷贝的情况下长度固定，其他同列表<br>5.对象引用的数组<br>与列表相似，元祖是对象引用的数组</p>
<p>和list相比<br>1.比列表操作速度快<br>2.对数据“写保护“<br>3.可用于字符串格式化中<br>4.可作为字典的key</p>
<p>#!/usr/bin/env python</p>
<p>#coding:utf-8</p>
<p>‘’’<br>FuncName: study_tuple.py<br>Desc: tuple 内建函数<br>Date: 2016-03-17 14:00<br>Author: johnny<br>‘’’</p>
<p> t.count(var)               # 该元素在元组中出现的个数<br> t.index(var)               # 该元素的位置（索引号）,无则抛异常<br> t = (1,2,3,4,[‘hello’,’johnny’],’blog.csdn.net/z_johnny’)   # 创建tuple<br> tu = (5,)                  # 只含有一个元素的元祖，必须加逗号“,”<br> t[1:5:2]                   # tuple的切片，切一部分，范围为索引[1，5)，即1、2、3、4不包括5，隔2取1个值 t[1:5:2]== (2, 4)<br> t[1]                       # tuple的索引，左1索引为0，右1索引为-1，t[1] == 2<br> t[4][1]                    # 同列表一样支持嵌套，t[4][1] == ‘johnny’</p>
<p>tuple的官方内置函数可用dir(tuple)与help(tuple) 命令进行查看</p>
<p>字典dict，用大括号“{key，value}”表示</p>
<p>1.通过键而不是偏移量来读取<br>字典就是一个关联数组，是一个通过关键字索引的对象的集合，使用键-值（key-value）进行存储，查找速度快<br>2.任意对象的无序集合<br>字典中的项没有特定顺序，以“键”为象征<br>3.可变长、异构、任意嵌套<br>同列表，嵌套可以包含列表和其他的字典等<br>4.属于可变映射类型<br>因为是无序，故不能进行序列操作，但可以在远处修改，通过键映射到值。字典是唯一内置的映射类型（键映射到值的对象）<br>5.对象引用表<br>字典存储的是对象引用，不是拷贝，和列表一样。字典的key是不能变的，list不能作为key，字符串、元祖、整数等都可以</p>
<p>和list比较，dict有以下几个特点：<br>1.查找和插入的速度极快，不会随着key的增加而增加<br>2.需要占用大量的内存，内存浪费多<br>而list相反：<br>1.查找和插入的时间随着元素的增加而增加<br>2.占用空间小，浪费内存很少<br>所以，dict是用空间来换取时间的一种方法</p>
<p>#!usr/bin/env python</p>
<p>#coding:utf-8</p>
<p>‘’’<br>FuncName: study_dict.py<br>Desc: dict 内建函数<br>Date: 2016-03-17 14:00<br>Author: johnny<br>‘’’</p>
<p>d = {‘Name’: ‘Johnny’, ‘Address’:’blog.csdn.net/z_johnny’}  # 创建dict<br>d[‘Name’]                      # 找出key为Name的值 d[‘Name’] == ‘Johnny’<br>d[‘Name’] = hello              # 更新key为Name的值 Name对应的值从Johnny改为hello<br>del d[‘Address’]               # 删除key为Name的值和该key d = {‘Name’: ‘Johnny’}<br>d.clear()                      # 删除字典d中的所有元素 d = {}<br>d.pop(‘Name’)                  # 删除字典d中key为’Name’的值和该键<br>d.copy()                       # 返回字典d的浅复制副本<br>d.fromkeys(S[,v])              # 创建一个新的字典，设置键为seq 和值为value<br>d.get(key, default=None)       # 返回该键key的值，若没有该键，则返回None<br>d.has_key(key)                 # 如果在字典d中存在键key，则返回true，否则返回 false<br>d.items()                      # 返回字典的（键，值）元组对的列表<br>d.keys()                       # 返回字典的键的列表<br>d.values()                     # 返回字典d的值列表<br>d.setdefault(key, default=None)# 类似get()</p>
<pre><code># 但会设定d[key]=default 如果key不在字典d中
</code></pre><p>d.update(d2)                   # 将字典d2的键值对增加到字典d中<br>d.iteritems()                  # （键，值）项的一个迭代器<br>d.iterkeys()                   # 字典d中键的一个迭代器<br>d.itervalues()                 # 字典d中值的一个迭代器<br>d.popitem()                    # 删除元组返回键、值，若字典d为空会报key错<br>d.viewitems()                  # 像对象一样提供字典d中项的一个视图<br>d.viewkeys()                   # 像对象一样提供字典d中key的一个视图<br>d.viewvalues()                 # 像对象一样提供字典d中value的一个视图  </p>
<p>dict的官方内置函数可用dir(dict)与help(dict) 命令进行查看</p>
<p>集合set，用小括号“( )”表示</p>
<p>1.是一组key的集合，但不存储value，并且key不能重复<br>创建一个set，需要提供一个list作为输入集合,s = set([1,2,3]),注意，传入的参数 [1, 2, 3] 是一个list，而显示的 set([1, 2, 3]) 只是告诉你这个set内部有1，2，3这3个元素，显示的[ ]不表示这是一个list<br>2.重复元素在set中自动被过滤<br>set可以看成数学意义上的无序和无重复元素的集合，因此，两个set可以做数学意义上的交集、并集等操作</p>
<p>还有一种集合是forzenset( )，是冻结的集合，它是不可变的，存在哈希值，好处是它可以作为字典的key，也可以作为其它集合的元素。缺点是一旦创建便不能更改，没有add，remove方法</p>
<p>和dict对比<br>1.set和dict的唯一区别仅在于没有存储对应的value<br>2.set的原理和dict一样，同样不可以放入可变对象，因为无法判断两个可变对象是否相等，也就无法保证set内部“不会有重复元素”</p>
<p>#!usr/bin/env python</p>
<p>#coding:utf-8</p>
<p>‘’’<br>FuncName: study_set.py<br>Desc: set 内建函数<br>Date: 2016-03-17 14:00<br>Author: johnny<br>‘’’</p>
<p>s = set([1,2,3])            # 创建一个数值set，有1，2，3三个元素s == set([1, 2, 3])<br>se = set(‘Hello’)           # 创建一个唯一字符的集合s == set([‘H’, ‘e’, ‘l’, ‘o’])<br>a = s | se                  # s 和 se 的并集 set([1, 2, 3, ‘e’, ‘H’, ‘l’, ‘o’])<br>b = s &amp; se                  # s 和 se 的交集 set([]) 没有相同项为空<br>c = s – se                 # 求差集（项在s中，但不在se中） set([1, 2, 3])<br>d = s ^ se                  # 对称差集（项在s或se中，但不会同时出现在二者中）</p>
<pre><code># set([1, 2, 3, &apos;e&apos;, &apos;H&apos;, &apos;l&apos;, &apos;o&apos;])
</code></pre><p>s.issubset(t)               # 如果s是t的子集,则返回True,否则返回False<br>s.issuperset(t)             # 如果t是s的超集,则返回True,否则返回False<br>s.union(t)                  # 返回一个新集合,该集合是s和t的并集<br>s.intersection(t)           # 返回一个新集合,该集合是s和t的交集<br>s.difference(t)             # 返回一个新集合,该集合是 s 的成员,但不是 t 的成员<br>s.symmetric_difference(t)   # 返回一个新集合,该集合是s或t的成员,但不是s和t共有的成员<br>s.copy()                    # 返回一个新集合,它是集合s的浅复制<br>s.update(t)                 # 用t中的元素修改s，即s现在包含s或t的成员<br>s.intersection_update(t)    # s中的成员是共同属于s和t中的元素<br>s.difference_update(t)      # s中的成员是属于s但不包含在t中的元素<br>s.symmetric_difference_update(t)    # s中的成员更新为那些包含在s或t中，</p>
<pre><code># 但不是s和t共有的元素
</code></pre><p>s.add(obj)                  # 在集合s中添加对象obj<br>s.remove(obj)               # 从集合s中删除对象obj，如果obj不是集合s中的元素</p>
<pre><code># （obj not in s），将引发KeyError
</code></pre><p>s.discard(obj)              # 如果obj是集合s中的元素，从集合s中删除对象obj<br>s.pop()                     # 删除集合是中的任意一个对象，并返回它<br>s.clear()                   # 删除集合s中的所有元素</p>
<p>set的官方内置函数可用dir(set)与help(set) 命令进行查看<br><a id="more"></a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;数序: 全称是数字序列，就是指数字按照一定规律所排出来的顺序。&lt;br&gt;序数: 表顺序的数,像第1、第2、第3。&lt;/p&gt;
&lt;p&gt;序列的两个特点：&lt;br&gt;1.索引操作符，从序列中抓取一个特定项目&lt;br&gt;2.和切片操作符，获取序列的一个切片，即一部分序列&lt;/p&gt;
&lt;p&gt;Python一些内置函数&lt;br&gt;1、cmp(A, B)：比较可为list、tuple等的A、B，A&amp;gt;B为1，A=B为0，小于为-1&lt;br&gt;2、len(obj)： 计算元素个数。&lt;br&gt;3、max(obj)：返回元素最大值。&lt;br&gt;4、min(obj)：返回元素最小值。&lt;br&gt;5、reversed(obj): 对元素进行翻转&lt;br&gt;6、enumerate(obj): 遍历list的元素，返回序号及其对应的元素 for x，y in list：&lt;br&gt;7、zip():打包成tuple（元组），然后返回由这些tuples组成的list（列表）&lt;/p&gt;
&lt;p&gt;列表、元组和字符串都是序列，字符串是字符的序列，列表和元祖是任意类型的序列&lt;/p&gt;
&lt;p&gt;列表list，用中括号“[ ]”表示&lt;/p&gt;
&lt;p&gt;1.任意对象的有序集合&lt;br&gt;列表是一组任意类型的值，按照一定顺序组合而成的&lt;br&gt;2.通过偏移读取&lt;br&gt;组成列表的值叫做元素(Elements)。每一个元素被标识一个索引，第一个索引是0，序列的功能都能实现&lt;br&gt;3.可变长度，异构以及任意嵌套&lt;br&gt;列表中的元素可以是任意类型，甚至是列表类型，也就是说列表可以嵌套&lt;br&gt;4.可变的序列&lt;br&gt;支持索引、切片、合并、删除等等操作，它们都是在原处进行修改列表&lt;br&gt;5.对象引用数组&lt;br&gt;列表可以当成普通的数组，每当用到引用时，Python总是会将这个引用指向一个对象，所以程序只需处理对象的操作。当把一个对象赋给一个数据结构元素或变量名时，Python总是会存储对象的引用，而不是对象的一个拷贝&lt;/p&gt;
&lt;p&gt;#!/usr/bin/env python&lt;/p&gt;
&lt;p&gt;#coding:utf-8&lt;/p&gt;
&lt;p&gt;‘’’&lt;br&gt;FuncName: study_list.py&lt;br&gt;Desc: list 内建函数&lt;br&gt;Date: 2016-03-17 14:00&lt;br&gt;Author: johnny&lt;br&gt;‘’’&lt;/p&gt;
&lt;p&gt; L.append(var)              # 追加元素，加在最后&lt;br&gt; L.insert(index,var)        # 在index的位置追加元素，位置就是索引&lt;br&gt; L.pop(var)                 # 从list中删除最后一个元素，并返回该元素&lt;br&gt; L.remove(var)              # 删除第一次出现的该元素&lt;br&gt; L.count(var)               # 该元素在列表中出现的个数&lt;br&gt; L.index(var)               # 该元素的位置（索引号）,无则抛异常&lt;br&gt; L.extend(list)             # 追加list，即合并list到L上，两个列表合并&lt;br&gt; L.sort()                   # 排序&lt;br&gt; L.reverse()                # 原地翻转列表，从前到后变成从后向前&lt;br&gt; l = [1,2,3,4,[‘hello’,’johnny’],’blog.csdn.net/z_johnny’]   # 创建list&lt;br&gt; l[1:5:2]                   # list的切片，切一部分，范围为索引[1，5)，即1、2、3、4不包括5，隔2取1个值 l[1:5:2] == [2, 4]&lt;br&gt; l[1]                       # list的索引，左1索引为0，右1索引为-1，l[1] == 2&lt;br&gt; l[4][1]                    # 列表支持嵌套，l[4][1] == ‘johnny’&lt;/p&gt;
&lt;p&gt;list的官方内置函数可用dir(list)与help(list) 命令进行查看&lt;/p&gt;
&lt;p&gt;元祖tuple，用小括号“( )”表示&lt;/p&gt;
&lt;p&gt;1.任意对象的有序集合&lt;br&gt;与列表相同&lt;br&gt;2.通过偏移存取&lt;br&gt;与列表相同&lt;br&gt;3.属于不可变序列类型&lt;br&gt;类似于字符串，但元组是不可变的，不支持在列表中任何原处修改操作，不支持任何方法调用&lt;br&gt;4.固定长度、异构、任意嵌套&lt;br&gt;固定长度即元组不可变，在不被拷贝的情况下长度固定，其他同列表&lt;br&gt;5.对象引用的数组&lt;br&gt;与列表相似，元祖是对象引用的数组&lt;/p&gt;
&lt;p&gt;和list相比&lt;br&gt;1.比列表操作速度快&lt;br&gt;2.对数据“写保护“&lt;br&gt;3.可用于字符串格式化中&lt;br&gt;4.可作为字典的key&lt;/p&gt;
&lt;p&gt;#!/usr/bin/env python&lt;/p&gt;
&lt;p&gt;#coding:utf-8&lt;/p&gt;
&lt;p&gt;‘’’&lt;br&gt;FuncName: study_tuple.py&lt;br&gt;Desc: tuple 内建函数&lt;br&gt;Date: 2016-03-17 14:00&lt;br&gt;Author: johnny&lt;br&gt;‘’’&lt;/p&gt;
&lt;p&gt; t.count(var)               # 该元素在元组中出现的个数&lt;br&gt; t.index(var)               # 该元素的位置（索引号）,无则抛异常&lt;br&gt; t = (1,2,3,4,[‘hello’,’johnny’],’blog.csdn.net/z_johnny’)   # 创建tuple&lt;br&gt; tu = (5,)                  # 只含有一个元素的元祖，必须加逗号“,”&lt;br&gt; t[1:5:2]                   # tuple的切片，切一部分，范围为索引[1，5)，即1、2、3、4不包括5，隔2取1个值 t[1:5:2]== (2, 4)&lt;br&gt; t[1]                       # tuple的索引，左1索引为0，右1索引为-1，t[1] == 2&lt;br&gt; t[4][1]                    # 同列表一样支持嵌套，t[4][1] == ‘johnny’&lt;/p&gt;
&lt;p&gt;tuple的官方内置函数可用dir(tuple)与help(tuple) 命令进行查看&lt;/p&gt;
&lt;p&gt;字典dict，用大括号“{key，value}”表示&lt;/p&gt;
&lt;p&gt;1.通过键而不是偏移量来读取&lt;br&gt;字典就是一个关联数组，是一个通过关键字索引的对象的集合，使用键-值（key-value）进行存储，查找速度快&lt;br&gt;2.任意对象的无序集合&lt;br&gt;字典中的项没有特定顺序，以“键”为象征&lt;br&gt;3.可变长、异构、任意嵌套&lt;br&gt;同列表，嵌套可以包含列表和其他的字典等&lt;br&gt;4.属于可变映射类型&lt;br&gt;因为是无序，故不能进行序列操作，但可以在远处修改，通过键映射到值。字典是唯一内置的映射类型（键映射到值的对象）&lt;br&gt;5.对象引用表&lt;br&gt;字典存储的是对象引用，不是拷贝，和列表一样。字典的key是不能变的，list不能作为key，字符串、元祖、整数等都可以&lt;/p&gt;
&lt;p&gt;和list比较，dict有以下几个特点：&lt;br&gt;1.查找和插入的速度极快，不会随着key的增加而增加&lt;br&gt;2.需要占用大量的内存，内存浪费多&lt;br&gt;而list相反：&lt;br&gt;1.查找和插入的时间随着元素的增加而增加&lt;br&gt;2.占用空间小，浪费内存很少&lt;br&gt;所以，dict是用空间来换取时间的一种方法&lt;/p&gt;
&lt;p&gt;#!usr/bin/env python&lt;/p&gt;
&lt;p&gt;#coding:utf-8&lt;/p&gt;
&lt;p&gt;‘’’&lt;br&gt;FuncName: study_dict.py&lt;br&gt;Desc: dict 内建函数&lt;br&gt;Date: 2016-03-17 14:00&lt;br&gt;Author: johnny&lt;br&gt;‘’’&lt;/p&gt;
&lt;p&gt;d = {‘Name’: ‘Johnny’, ‘Address’:’blog.csdn.net/z_johnny’}  # 创建dict&lt;br&gt;d[‘Name’]                      # 找出key为Name的值 d[‘Name’] == ‘Johnny’&lt;br&gt;d[‘Name’] = hello              # 更新key为Name的值 Name对应的值从Johnny改为hello&lt;br&gt;del d[‘Address’]               # 删除key为Name的值和该key d = {‘Name’: ‘Johnny’}&lt;br&gt;d.clear()                      # 删除字典d中的所有元素 d = {}&lt;br&gt;d.pop(‘Name’)                  # 删除字典d中key为’Name’的值和该键&lt;br&gt;d.copy()                       # 返回字典d的浅复制副本&lt;br&gt;d.fromkeys(S[,v])              # 创建一个新的字典，设置键为seq 和值为value&lt;br&gt;d.get(key, default=None)       # 返回该键key的值，若没有该键，则返回None&lt;br&gt;d.has_key(key)                 # 如果在字典d中存在键key，则返回true，否则返回 false&lt;br&gt;d.items()                      # 返回字典的（键，值）元组对的列表&lt;br&gt;d.keys()                       # 返回字典的键的列表&lt;br&gt;d.values()                     # 返回字典d的值列表&lt;br&gt;d.setdefault(key, default=None)# 类似get()&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# 但会设定d[key]=default 如果key不在字典d中
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;d.update(d2)                   # 将字典d2的键值对增加到字典d中&lt;br&gt;d.iteritems()                  # （键，值）项的一个迭代器&lt;br&gt;d.iterkeys()                   # 字典d中键的一个迭代器&lt;br&gt;d.itervalues()                 # 字典d中值的一个迭代器&lt;br&gt;d.popitem()                    # 删除元组返回键、值，若字典d为空会报key错&lt;br&gt;d.viewitems()                  # 像对象一样提供字典d中项的一个视图&lt;br&gt;d.viewkeys()                   # 像对象一样提供字典d中key的一个视图&lt;br&gt;d.viewvalues()                 # 像对象一样提供字典d中value的一个视图  &lt;/p&gt;
&lt;p&gt;dict的官方内置函数可用dir(dict)与help(dict) 命令进行查看&lt;/p&gt;
&lt;p&gt;集合set，用小括号“( )”表示&lt;/p&gt;
&lt;p&gt;1.是一组key的集合，但不存储value，并且key不能重复&lt;br&gt;创建一个set，需要提供一个list作为输入集合,s = set([1,2,3]),注意，传入的参数 [1, 2, 3] 是一个list，而显示的 set([1, 2, 3]) 只是告诉你这个set内部有1，2，3这3个元素，显示的[ ]不表示这是一个list&lt;br&gt;2.重复元素在set中自动被过滤&lt;br&gt;set可以看成数学意义上的无序和无重复元素的集合，因此，两个set可以做数学意义上的交集、并集等操作&lt;/p&gt;
&lt;p&gt;还有一种集合是forzenset( )，是冻结的集合，它是不可变的，存在哈希值，好处是它可以作为字典的key，也可以作为其它集合的元素。缺点是一旦创建便不能更改，没有add，remove方法&lt;/p&gt;
&lt;p&gt;和dict对比&lt;br&gt;1.set和dict的唯一区别仅在于没有存储对应的value&lt;br&gt;2.set的原理和dict一样，同样不可以放入可变对象，因为无法判断两个可变对象是否相等，也就无法保证set内部“不会有重复元素”&lt;/p&gt;
&lt;p&gt;#!usr/bin/env python&lt;/p&gt;
&lt;p&gt;#coding:utf-8&lt;/p&gt;
&lt;p&gt;‘’’&lt;br&gt;FuncName: study_set.py&lt;br&gt;Desc: set 内建函数&lt;br&gt;Date: 2016-03-17 14:00&lt;br&gt;Author: johnny&lt;br&gt;‘’’&lt;/p&gt;
&lt;p&gt;s = set([1,2,3])            # 创建一个数值set，有1，2，3三个元素s == set([1, 2, 3])&lt;br&gt;se = set(‘Hello’)           # 创建一个唯一字符的集合s == set([‘H’, ‘e’, ‘l’, ‘o’])&lt;br&gt;a = s | se                  # s 和 se 的并集 set([1, 2, 3, ‘e’, ‘H’, ‘l’, ‘o’])&lt;br&gt;b = s &amp;amp; se                  # s 和 se 的交集 set([]) 没有相同项为空&lt;br&gt;c = s – se                 # 求差集（项在s中，但不在se中） set([1, 2, 3])&lt;br&gt;d = s ^ se                  # 对称差集（项在s或se中，但不会同时出现在二者中）&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# set([1, 2, 3, &amp;apos;e&amp;apos;, &amp;apos;H&amp;apos;, &amp;apos;l&amp;apos;, &amp;apos;o&amp;apos;])
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;s.issubset(t)               # 如果s是t的子集,则返回True,否则返回False&lt;br&gt;s.issuperset(t)             # 如果t是s的超集,则返回True,否则返回False&lt;br&gt;s.union(t)                  # 返回一个新集合,该集合是s和t的并集&lt;br&gt;s.intersection(t)           # 返回一个新集合,该集合是s和t的交集&lt;br&gt;s.difference(t)             # 返回一个新集合,该集合是 s 的成员,但不是 t 的成员&lt;br&gt;s.symmetric_difference(t)   # 返回一个新集合,该集合是s或t的成员,但不是s和t共有的成员&lt;br&gt;s.copy()                    # 返回一个新集合,它是集合s的浅复制&lt;br&gt;s.update(t)                 # 用t中的元素修改s，即s现在包含s或t的成员&lt;br&gt;s.intersection_update(t)    # s中的成员是共同属于s和t中的元素&lt;br&gt;s.difference_update(t)      # s中的成员是属于s但不包含在t中的元素&lt;br&gt;s.symmetric_difference_update(t)    # s中的成员更新为那些包含在s或t中，&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# 但不是s和t共有的元素
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;s.add(obj)                  # 在集合s中添加对象obj&lt;br&gt;s.remove(obj)               # 从集合s中删除对象obj，如果obj不是集合s中的元素&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# （obj not in s），将引发KeyError
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;s.discard(obj)              # 如果obj是集合s中的元素，从集合s中删除对象obj&lt;br&gt;s.pop()                     # 删除集合是中的任意一个对象，并返回它&lt;br&gt;s.clear()                   # 删除集合s中的所有元素&lt;/p&gt;
&lt;p&gt;set的官方内置函数可用dir(set)与help(set) 命令进行查看&lt;br&gt;
    
    </summary>
    
      <category term="python" scheme="http://sunhao.win/categories/python/"/>
    
    
      <category term="数序" scheme="http://sunhao.win/tags/%E6%95%B0%E5%BA%8F/"/>
    
      <category term="序列" scheme="http://sunhao.win/tags/%E5%BA%8F%E5%88%97/"/>
    
      <category term="数据结构" scheme="http://sunhao.win/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
      <category term="list" scheme="http://sunhao.win/tags/list/"/>
    
      <category term="tuple" scheme="http://sunhao.win/tags/tuple/"/>
    
      <category term="dict" scheme="http://sunhao.win/tags/dict/"/>
    
      <category term="set" scheme="http://sunhao.win/tags/set/"/>
    
  </entry>
  
  <entry>
    <title>名词 吞吐量 带宽 QPS TPS DDOS流量 并发用户数</title>
    <link href="http://sunhao.win/2017/03/01/safe-noun/"/>
    <id>http://sunhao.win/2017/03/01/safe-noun/</id>
    <published>2017-03-01T01:00:44.000Z</published>
    <updated>2017-03-01T06:25:40.677Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Throughput：吞吐量。防火墙吞吐量是指在没有帧丢失的情况下，设备能够接收并转发的最大数据速率。-1"><a href="#Throughput：吞吐量。防火墙吞吐量是指在没有帧丢失的情况下，设备能够接收并转发的最大数据速率。-1" class="headerlink" title="Throughput：吞吐量。防火墙吞吐量是指在没有帧丢失的情况下，设备能够接收并转发的最大数据速率。[1]"></a>Throughput：吞吐量。防火墙吞吐量是指在没有帧丢失的情况下，设备能够接收并转发的最大数据速率。[1]</h3><h3 id="Max-net-bitrate-带宽。指链路上每秒所能传送的比特数，它取决于链路时钟速率和信道编码在计算机网络中又称为线速。可以说以太网的带宽是10Mbps。"><a href="#Max-net-bitrate-带宽。指链路上每秒所能传送的比特数，它取决于链路时钟速率和信道编码在计算机网络中又称为线速。可以说以太网的带宽是10Mbps。" class="headerlink" title="Max net bitrate: 带宽。指链路上每秒所能传送的比特数，它取决于链路时钟速率和信道编码在计算机网络中又称为线速。可以说以太网的带宽是10Mbps。"></a>Max net bitrate: 带宽。指链路上每秒所能传送的比特数，它取决于链路时钟速率和信道编码在计算机网络中又称为线速。可以说以太网的带宽是10Mbps。</h3><p>两者需要区分链路上的可用带宽（带宽）与实际链路中每秒所能传送的比特数（吞吐量）。通常更倾向于用“吞吐量”一词来表示一个系统的测试性能。这样，因为实现受各种低效率因素的影响，所以由一段带宽为10Mbps的链路连接的一对节点可能只达到2Mbps的吞吐量。</p>
<h3 id="QPS：Queries-Per-Second意思是“每秒查询率”，是一台服务器每秒能够相应的查询次数，是对一个特定的查询服务器在规定时间内所处理流量多少的衡量标准。为域名系统服务器的机器的性能经常用每秒查询率来衡量。对应fetches-sec，即每秒的响应请求数，也即是最大吞吐能力。"><a href="#QPS：Queries-Per-Second意思是“每秒查询率”，是一台服务器每秒能够相应的查询次数，是对一个特定的查询服务器在规定时间内所处理流量多少的衡量标准。为域名系统服务器的机器的性能经常用每秒查询率来衡量。对应fetches-sec，即每秒的响应请求数，也即是最大吞吐能力。" class="headerlink" title="QPS：Queries Per Second意思是“每秒查询率”，是一台服务器每秒能够相应的查询次数，是对一个特定的查询服务器在规定时间内所处理流量多少的衡量标准。为域名系统服务器的机器的性能经常用每秒查询率来衡量。对应fetches/sec，即每秒的响应请求数，也即是最大吞吐能力。"></a>QPS：Queries Per Second意思是“每秒查询率”，是一台服务器每秒能够相应的查询次数，是对一个特定的查询服务器在规定时间内所处理流量多少的衡量标准。为域名系统服务器的机器的性能经常用每秒查询率来衡量。对应fetches/sec，即每秒的响应请求数，也即是最大吞吐能力。</h3><a id="more"></a>
<h3 id="TPS是-TransactionsPerSecond的缩写，也就是事务数-秒。"><a href="#TPS是-TransactionsPerSecond的缩写，也就是事务数-秒。" class="headerlink" title="TPS是 TransactionsPerSecond的缩写，也就是事务数/秒。"></a>TPS是 TransactionsPerSecond的缩写，也就是事务数/秒。</h3><p>它是软件测试结果的测量单位。一个事务是指一个客户机向服务器发送请求然后服务器 做出反应的过程。客户机在发送请求时开始计时，收到服务器响应后结束计时，以此来计算使用的时间和完成的事务个数，最终利用这些信息来估计得分。客户机使 用加权协函数平均方法来计算客户机的得分，测试软件就是利用客户机的这些信息使用加权协函数平均方法来计算服务器端的整体TPS得分。</p>
<h3 id="DDOS流量"><a href="#DDOS流量" class="headerlink" title="DDOS流量"></a>DDOS流量</h3><p>该防御值主要针对DNS服务器进行DDOS攻击所产生的流量。这种攻击方式，是指借助于客户/服务器技术，将多个计算机联合起来作为攻击平台，对一个或多个目标发动DDOS攻击，从而成倍地提高拒绝服务攻击的威力。</p>
<h3 id="响应时间-RT"><a href="#响应时间-RT" class="headerlink" title="响应时间(RT)"></a>响应时间(RT)</h3><p>响应时间是指系统对请求作出响应的时间。对于一个游戏软件来说，响应时间小于100毫秒应该是不错的，响应时间在1秒左右可能属于勉强可以接受，如果响应时间达到3秒就完全难以接受了。而对于编译系统来说，完整编译一个较大规模软件的源代码可能需要几十分钟甚至更长时间，但这些响应时间对于用户来说都是可以接受的。 </p>
<h3 id="吞吐量-Throughput"><a href="#吞吐量-Throughput" class="headerlink" title="吞吐量(Throughput)"></a>吞吐量(Throughput)</h3><pre><code>吞吐量是指系统在单位时间内处理请求的数量。对于无并发的应用系统而言，吞吐量与响应时间成严格的反比关系，实际上此时吞吐量就是响应时间的倒数。前面已经说过，对于单用户的系统，响应时间（或者系统响应时间和应用延迟时间）可以很好地度量系统的性能，但对于并发系统，通常需要用吞吐量作为性能指标。 
</code></pre><p>　　对于一个多用户的系统，如果只有一个用户使用时系统的平均响应时间是t，当有你n个用户使用时，每个用户看到的响应时间通常并不是n×t，而往往比n×t小很多（当然，在某些特殊情况下也可能比n×t大，甚至大很多）。这是因为处理每个请求需要用到很多资源，由于每个请求的处理过程中有许多不走难以并发执行，这导致在具体的一个时间点，所占资源往往并不多。也就是说在处理单个请求时，在每个时间点都可能有许多资源被闲置，当处理多个请求时，如果资源配置合理，每个用户看到的平均响应时间并不随用户数的增加而线性增加。实际上，不同系统的平均响应时间随用户数增加而增长的速度也不大相同，这也是采用吞吐量来度量并发系统的性能的主要原因。一般而言，吞吐量是一个比较通用的指标，两个具有不同用户数和用户使用模式的系统，如果其最大吞吐量基本一致，则可以判断两个系统的处理能力基本一致。 </p>
<h3 id="并发用户数"><a href="#并发用户数" class="headerlink" title="并发用户数"></a>并发用户数</h3><p>　　并发用户数是指系统可以同时承载的正常使用系统功能的用户的数量。与吞吐量相比，并发用户数是一个更直观但也更笼统的性能指标。实际上，并发用户数是一个非常不准确的指标，因为用户不同的使用模式会导致不同用户在单位时间发出不同数量的请求。一网站系统为例，假设用户只有注册后才能使用，但注册用户并不是每时每刻都在使用该网站，因此具体一个时刻只有部分注册用户同时在线，在线用户就在浏览网站时会花很多时间阅读网站上的信息，因而具体一个时刻只有部分在线用户同时向系统发出请求。这样，对于网站系统我们会有三个关于用户数的统计数字：注册用户数、在线用户数和同时发请求用户数。由于注册用户可能长时间不登陆网站，使用注册用户数作为性能指标会造成很大的误差。而在线用户数和同事发请求用户数都可以作为性能指标。相比而言，以在线用户作为性能指标更直观些，而以同时发请求用户数作为性能指标更准确些。 </p>
<p>从以上概念来看吞吐量和响应时间是衡量系统性能的重要指标，QPS虽然和吞吐量的计量单位不同，但应该是成正比的，任何一个指标都可以含量服务器的并行处理能力。当然Throughput更关心数据量，QPS更关心处理笔数。 </p>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Throughput：吞吐量。防火墙吞吐量是指在没有帧丢失的情况下，设备能够接收并转发的最大数据速率。-1&quot;&gt;&lt;a href=&quot;#Throughput：吞吐量。防火墙吞吐量是指在没有帧丢失的情况下，设备能够接收并转发的最大数据速率。-1&quot; class=&quot;headerlink&quot; title=&quot;Throughput：吞吐量。防火墙吞吐量是指在没有帧丢失的情况下，设备能够接收并转发的最大数据速率。[1]&quot;&gt;&lt;/a&gt;Throughput：吞吐量。防火墙吞吐量是指在没有帧丢失的情况下，设备能够接收并转发的最大数据速率。[1]&lt;/h3&gt;&lt;h3 id=&quot;Max-net-bitrate-带宽。指链路上每秒所能传送的比特数，它取决于链路时钟速率和信道编码在计算机网络中又称为线速。可以说以太网的带宽是10Mbps。&quot;&gt;&lt;a href=&quot;#Max-net-bitrate-带宽。指链路上每秒所能传送的比特数，它取决于链路时钟速率和信道编码在计算机网络中又称为线速。可以说以太网的带宽是10Mbps。&quot; class=&quot;headerlink&quot; title=&quot;Max net bitrate: 带宽。指链路上每秒所能传送的比特数，它取决于链路时钟速率和信道编码在计算机网络中又称为线速。可以说以太网的带宽是10Mbps。&quot;&gt;&lt;/a&gt;Max net bitrate: 带宽。指链路上每秒所能传送的比特数，它取决于链路时钟速率和信道编码在计算机网络中又称为线速。可以说以太网的带宽是10Mbps。&lt;/h3&gt;&lt;p&gt;两者需要区分链路上的可用带宽（带宽）与实际链路中每秒所能传送的比特数（吞吐量）。通常更倾向于用“吞吐量”一词来表示一个系统的测试性能。这样，因为实现受各种低效率因素的影响，所以由一段带宽为10Mbps的链路连接的一对节点可能只达到2Mbps的吞吐量。&lt;/p&gt;
&lt;h3 id=&quot;QPS：Queries-Per-Second意思是“每秒查询率”，是一台服务器每秒能够相应的查询次数，是对一个特定的查询服务器在规定时间内所处理流量多少的衡量标准。为域名系统服务器的机器的性能经常用每秒查询率来衡量。对应fetches-sec，即每秒的响应请求数，也即是最大吞吐能力。&quot;&gt;&lt;a href=&quot;#QPS：Queries-Per-Second意思是“每秒查询率”，是一台服务器每秒能够相应的查询次数，是对一个特定的查询服务器在规定时间内所处理流量多少的衡量标准。为域名系统服务器的机器的性能经常用每秒查询率来衡量。对应fetches-sec，即每秒的响应请求数，也即是最大吞吐能力。&quot; class=&quot;headerlink&quot; title=&quot;QPS：Queries Per Second意思是“每秒查询率”，是一台服务器每秒能够相应的查询次数，是对一个特定的查询服务器在规定时间内所处理流量多少的衡量标准。为域名系统服务器的机器的性能经常用每秒查询率来衡量。对应fetches/sec，即每秒的响应请求数，也即是最大吞吐能力。&quot;&gt;&lt;/a&gt;QPS：Queries Per Second意思是“每秒查询率”，是一台服务器每秒能够相应的查询次数，是对一个特定的查询服务器在规定时间内所处理流量多少的衡量标准。为域名系统服务器的机器的性能经常用每秒查询率来衡量。对应fetches/sec，即每秒的响应请求数，也即是最大吞吐能力。&lt;/h3&gt;
    
    </summary>
    
      <category term="网络安全" scheme="http://sunhao.win/categories/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/"/>
    
    
      <category term="QPS" scheme="http://sunhao.win/tags/QPS/"/>
    
      <category term="TPS" scheme="http://sunhao.win/tags/TPS/"/>
    
      <category term="吞吐量" scheme="http://sunhao.win/tags/%E5%90%9E%E5%90%90%E9%87%8F/"/>
    
  </entry>
  
  <entry>
    <title>position:absolute-top,right,bottom,left为0使用</title>
    <link href="http://sunhao.win/2017/02/26/css-top-right-bootom-left-zero/"/>
    <id>http://sunhao.win/2017/02/26/css-top-right-bootom-left-zero/</id>
    <published>2017-02-26T11:27:57.000Z</published>
    <updated>2017-02-26T12:29:38.723Z</updated>
    
    <content type="html"><![CDATA[<p>  绝对定位一直用起来非常方便，直接脱离文本流。偶然发现它还有个超强的功能。竟然可以撑开盒子宽高。</p>
<h2 id="对外"><a href="#对外" class="headerlink" title="对外"></a>对外</h2><h3 id="默认情况下，看代码；盒子如果设置-宽高后-设置绝对定位-bottom为0会自动抵底部。"><a href="#默认情况下，看代码；盒子如果设置-宽高后-设置绝对定位-bottom为0会自动抵底部。" class="headerlink" title="默认情况下，看代码；盒子如果设置   宽高后   设置绝对定位,bottom为0会自动抵底部。"></a>默认情况下，看代码；盒子如果设置   宽高后   设置绝对定位,bottom为0会自动抵底部。</h3><p><img src="http://ojlt0g866.bkt.clouddn.com/blog/20170226/194602705.png" alt="mark"><br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></div><div class="line">            .wai&#123;</div><div class="line">                position:relative;</div><div class="line">                top: 300px;</div><div class="line">                left: 300px;</div><div class="line">                width: 233px;</div><div class="line">                height: 370px;</div><div class="line">                background-color: yellow;</div><div class="line"></div><div class="line">            &#125;</div><div class="line">            .nei&#123;</div><div class="line">                position: absolute;</div><div class="line">                /*top: 0px;*/</div><div class="line">                /*left: 0px;</div><div class="line">                right: 0px;*/</div><div class="line">                bottom: 0px;</div><div class="line">                width: 100px;</div><div class="line">                height: 100px;</div><div class="line">                background-color: rgba(200,200,200,0.7);</div><div class="line">            &#125;</div><div class="line"></div><div class="line">        <span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"wai"</span>&gt;</span></div><div class="line">             <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"nei"</span>&gt;</span></div><div class="line">                    <span class="comment">&lt;!--  &lt;div class="nei-item1"&gt;1&lt;/div&gt;</span></div><div class="line">                     &lt;div class="nei-item2"&gt;2&lt;/div&gt; --&gt;</div><div class="line">             <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">     <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure></p>
<a id="more"></a>
<h3 id="当我们同时设置bottom和top，nei盒子会自动抵触顶部。说明top优先级要比bottom高。"><a href="#当我们同时设置bottom和top，nei盒子会自动抵触顶部。说明top优先级要比bottom高。" class="headerlink" title="当我们同时设置bottom和top，nei盒子会自动抵触顶部。说明top优先级要比bottom高。"></a>当我们同时设置bottom和top，nei盒子会自动抵触顶部。说明top优先级要比bottom高。</h3><h3 id="当我们这个时候把nei盒子的高度去掉，这个时候神奇的事情发生了。nei的高度被撑开。"><a href="#当我们这个时候把nei盒子的高度去掉，这个时候神奇的事情发生了。nei的高度被撑开。" class="headerlink" title="当我们这个时候把nei盒子的高度去掉，这个时候神奇的事情发生了。nei的高度被撑开。"></a>当我们这个时候把nei盒子的高度去掉，这个时候神奇的事情发生了。nei的高度被撑开。</h3><p><img src="http://ojlt0g866.bkt.clouddn.com/blog/20170226/195039804.png" alt="mark"><br>同理width不设置，然后设置left,right为零，nei的宽度也会被撑开.</p>
<h3 id="为了确认宽高是来源于最邻近的定位点，而不是父级，我们在wai内在加个盒子wai2并设置宽高。"><a href="#为了确认宽高是来源于最邻近的定位点，而不是父级，我们在wai内在加个盒子wai2并设置宽高。" class="headerlink" title="为了确认宽高是来源于最邻近的定位点，而不是父级，我们在wai内在加个盒子wai2并设置宽高。"></a>为了确认宽高是来源于最邻近的定位点，而不是父级，我们在wai内在加个盒子wai2并设置宽高。</h3><p>1.nei盒子的宽高完全由上级定位节点，而不是父级确定。<br>2.nei盒子完全覆盖掉wai2的位置。<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="xml"></span></div><div class="line">                          .wai&#123;</div><div class="line">                position:relative;</div><div class="line">                top: 300px;</div><div class="line">                left: 300px;</div><div class="line">                width: 233px;</div><div class="line">                height: 370px;</div><div class="line">                background-color: yellow;</div><div class="line"></div><div class="line">            &#125;</div><div class="line"></div><div class="line">                .wai2&#123;</div><div class="line">                width: 100px;</div><div class="line">                height: 100px;</div><div class="line">                background-color: yellow;</div><div class="line">                &#125;</div><div class="line">                 .nei&#123;</div><div class="line">                position: absolute;</div><div class="line">                top: 0px;</div><div class="line">                left: 0px;</div><div class="line">                right: 0px;</div><div class="line">                bottom: 0px;</div><div class="line">                background-color: red;</div><div class="line">                <span class="comment">&lt;!--background-color: rgba(200,200,200,0.7);--&gt;</span></div><div class="line">            &#125;</div><div class="line">        <span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"wai"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"wai2"</span>&gt;</span></div><div class="line">                 <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"nei"</span>&gt;</span></div><div class="line"></div><div class="line">             <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">            </div><div class="line">     <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p><img src="http://ojlt0g866.bkt.clouddn.com/blog/20170226/201040072.png" alt="mark"></p>
<h2 id="对内"><a href="#对内" class="headerlink" title="对内"></a>对内</h2><h3 id="假如nei盒子的内部有其余盒子呢，比如我们在内部加两个盒子-不设置宽度。只设置高度。宽度可以继承。"><a href="#假如nei盒子的内部有其余盒子呢，比如我们在内部加两个盒子-不设置宽度。只设置高度。宽度可以继承。" class="headerlink" title="假如nei盒子的内部有其余盒子呢，比如我们在内部加两个盒子 不设置宽度。只设置高度。宽度可以继承。"></a>假如nei盒子的内部有其余盒子呢，比如我们在内部加两个盒子 不设置宽度。只设置高度。宽度可以继承。</h3><h3 id="而且nei盒子的宽高-还是wai盒子的宽高。但是nei盒子的内部盒子的高度已经溢出。"><a href="#而且nei盒子的宽高-还是wai盒子的宽高。但是nei盒子的内部盒子的高度已经溢出。" class="headerlink" title="而且nei盒子的宽高 还是wai盒子的宽高。但是nei盒子的内部盒子的高度已经溢出。"></a>而且nei盒子的宽高 还是wai盒子的宽高。但是nei盒子的内部盒子的高度已经溢出。</h3><p><img src="http://ojlt0g866.bkt.clouddn.com/blog/20170226/201912871.png" alt="mark"></p>
<h3 id="当nei盒子的内部盒子设置百分比时候，是相对于父级。同理height也是相对父级。可以设置都是50-50-看下"><a href="#当nei盒子的内部盒子设置百分比时候，是相对于父级。同理height也是相对父级。可以设置都是50-50-看下" class="headerlink" title="当nei盒子的内部盒子设置百分比时候，是相对于父级。同理height也是相对父级。可以设置都是50% 50%看下"></a>当nei盒子的内部盒子设置百分比时候，是相对于父级。同理height也是相对父级。可以设置都是50% 50%看下</h3><p><img src="http://ojlt0g866.bkt.clouddn.com/blog/20170226/202907572.png" alt="mark"></p>
<p>总结来说。利用这个特性，我们内部无需再设置宽度。可直接继承。这样的好处可以实现响应式的变化。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;  绝对定位一直用起来非常方便，直接脱离文本流。偶然发现它还有个超强的功能。竟然可以撑开盒子宽高。&lt;/p&gt;
&lt;h2 id=&quot;对外&quot;&gt;&lt;a href=&quot;#对外&quot; class=&quot;headerlink&quot; title=&quot;对外&quot;&gt;&lt;/a&gt;对外&lt;/h2&gt;&lt;h3 id=&quot;默认情况下，看代码；盒子如果设置-宽高后-设置绝对定位-bottom为0会自动抵底部。&quot;&gt;&lt;a href=&quot;#默认情况下，看代码；盒子如果设置-宽高后-设置绝对定位-bottom为0会自动抵底部。&quot; class=&quot;headerlink&quot; title=&quot;默认情况下，看代码；盒子如果设置   宽高后   设置绝对定位,bottom为0会自动抵底部。&quot;&gt;&lt;/a&gt;默认情况下，看代码；盒子如果设置   宽高后   设置绝对定位,bottom为0会自动抵底部。&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;http://ojlt0g866.bkt.clouddn.com/blog/20170226/194602705.png&quot; alt=&quot;mark&quot;&gt;&lt;br&gt;&lt;figure class=&quot;highlight html&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;25&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;26&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;27&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;28&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;29&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;30&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;31&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;32&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;33&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;34&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;35&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;36&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;html&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;lang&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;en&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;head&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;meta&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;charset&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;title&lt;/span&gt;&amp;gt;&lt;/span&gt;Document&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;title&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;style&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;undefined&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            .wai&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                position:relative;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                top: 300px;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                left: 300px;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                width: 233px;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                height: 370px;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                background-color: yellow;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            .nei&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                position: absolute;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                /*top: 0px;*/&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                /*left: 0px;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                right: 0px;*/&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                bottom: 0px;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                width: 100px;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                height: 100px;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                background-color: rgba(200,200,200,0.7);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;style&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;head&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;body&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;     &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;div&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;wai&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;             &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;div&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;nei&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                    &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--  &amp;lt;div class=&quot;nei-item1&quot;&amp;gt;1&amp;lt;/div&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                     &amp;lt;div class=&quot;nei-item2&quot;&amp;gt;2&amp;lt;/div&amp;gt; --&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;             &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;div&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;     &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;div&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;body&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;html&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="css" scheme="http://sunhao.win/categories/css/"/>
    
    
      <category term="position" scheme="http://sunhao.win/tags/position/"/>
    
      <category term="css" scheme="http://sunhao.win/tags/css/"/>
    
  </entry>
  
  <entry>
    <title>使用iptables应对SYN攻击,CC攻击,ACK攻击[转]</title>
    <link href="http://sunhao.win/2017/02/24/safe-iptables/"/>
    <id>http://sunhao.win/2017/02/24/safe-iptables/</id>
    <published>2017-02-24T06:58:05.000Z</published>
    <updated>2017-02-24T08:02:14.406Z</updated>
    
    <content type="html"><![CDATA[<p>三次握手的过程及相关概念<br>TCP/IP协议使用三次握手来建立连接，过程如下：<br>1、第一次握手，客户端发送数据包syn到服务器，并进入SYN_SEND状态，等待回复<br>2、第二次握手，服务器发送数据报syn/ack，给客户机，并进入SYN_RECV状态，等待回复<br>3、第三次握手，客户端发送数据包ACK给客户机，发送完成后，客户端和服务器进入ESTABLISHED状态，链接建立完成</p>
<p>三次握手协议中，服务器维护一个等待队列，收到一个syn包就在队列中建立一个条目，并分配一定的资源。对应的每一个条目表示已经收到一个syn请 求，并已经回复syn/ack，服务器上对应的连接已经进入SYN_RECV状态，等待客户端响应，收到客户端的响应包以后，该连接进入 ESTABLISHED状态，队列中对应的条目被删除。<br>backlog参数：设定等待队列的最大数目。对应内核参数：net.ipv4.tcp_max_syn_backlog = 1024<br>syn-ack重传次数：服务器发送syn/ack包，如果没有收到客户端的相应，就会重传syn/ack，超过一定时间之后会进行第二次重传，超过设定 次数以后将该条目从队列中删除。每次重传的间隔时间并不确定。对应的内核参数：net.ipv4.tcp_synack_retries = 5<br>syn重传次数：概念和syn/ack重传次数类似，对应的内核参数：net.ipv4.tcp_syn_retries = 5<br>等待存活时间：指等待队列的条目存活时间，即从服务器收到syn包到确认这个包无效的最长时间，该时间是所有重传包请求的最长等待时间<br><a id="more"></a><br>什么是SYN 攻击</p>
<p>syn攻击属于DDOS攻击中的一种，利用TCP/IP的缺陷进行网络攻击，可以使用很小的资源取得十分显著的效果。其基本原理如下：<br>服务器收到客户端的syn包，之后进入SYN_RECV状态，服务器的等待队列中增加一个条目，服务器未收到客户端的确认包，进行重传，一直到超时之后， 该条目从未链接队列中删除。客户端不断地发送syn包，而不响应来自服务器的syn/ack，等待队列的条目迅速增长，最后服务器的等待队列达到最大数 目，之后就不能再接受新的连接，一直到链接超时才从队列中删除对应的条目。配合ip地址欺骗技术，该方法可以取得十分良好的效果，基本上在攻击期间，服务 器将不能给正常的用户提供服务。这个攻击办法利用了TCP/IP协议的缺陷，攻击的目标不止于服务器，任何网络设备，只要开启了网络服务器，都可能会受到 这种攻击，导致处理器资源被大量占用，内存被用完，大量队列等待处理，针对网络设备的攻击往往会导致整个网络瘫痪。</p>
<p>如何减小SYN攻击的影响</p>
<p>1、修改等待数：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"># sysctl -w net.ipv4.tcp_max_syn_backlog=2048</div></pre></td></tr></table></figure></p>
<p>2、启用syncookies：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">#sysctl -w net.ipv4.tcp_syncookies=1</div></pre></td></tr></table></figure></p>
<p>启用syncookies可以大幅减小syn攻击带来的影响，但是却引入了新的安全缺陷</p>
<p>syncookie基本原理是：仔细处理连接的初始序列号而不是随机选择一个序列号。一旦server接收到SYN报文，将关键信息仔细编码并作为 state存储在SYN队列中。这种经过编码的信息是用一个秘钥进行加密hash，形成SYN-ACK报文中的序列号并发送给client。在合法握手的 第三个报文中，即从client返回给server的ACK报文中，在acknowledgment number字段中包含该序列号(加1). 这样，open双向连接所必须的所有信息又返回给server，而server在三次握手完成之前不必维护state。syn-cookies解决了 SYN的基本问题，但是随之带来一个新的问题，就是服务器需要对收到的ACK报文进行计算，提高了三次握手需要的系统资源。一种新的攻击方式随之而来，即 ACK攻击，发送大量的ACK数据报，导致服务器忙于计算最终导致服务器停止相应。Linux上的实际应用中，只有等待数被占满的时候才会启用 syncookies的方式（syncookies摘自网文）</p>
<p>3、修改重试次数<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">#sysctl -w net.ipv4.tcp_syn_retries = 0</div></pre></td></tr></table></figure></p>
<p>重传次数设置为0，只要收不到客户端的响应，立即丢弃该连接，默认设置为5次<br>4、使用iptables限制单个地址的并发连接数量：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">#iptables -t filter -A INPUT -p tcp --dport 80 --tcp-flags FIN,SYN,RST,ACK SYN -m connlimit --connlimit-above 10 --connlimit-mask 32 -j REJECT</div></pre></td></tr></table></figure></p>
<p>5、使用iptables限制单个c类子网的并发链接数量：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">#iptables -t filter -A INPUT -p tcp --dport 80 --tcp-flags FIN,SYN,RST,ACK SYN -m connlimit --connlimit-above 10 --connlimit-mask 24 -j REJECT</div></pre></td></tr></table></figure></p>
<p>6、限制单位时间内的连接数：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">#iptables -t filter -A INPUT -p tcp --dport 80 -m --state --state NEW -m recent --set --name access --resource</div><div class="line"></div><div class="line">#iptables -t filter -A INPUT -p tcp --dport 80 -m --state --state NEW -m recent --update --seconds 60 --hitcount 30 --name access -j DROP</div></pre></td></tr></table></figure></p>
<p>或者使用如下两条策略<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">#iptables -t filter -A INPUT -p tcp --dport 80 -m --state --syn -m recent --set</div><div class="line"></div><div class="line">#iptables -t filter -A INPUT -p tcp --dport 80 -m --state --syn -m recent --update --seconds 60 --hitcount 30 -j DROP</div></pre></td></tr></table></figure></p>
<p>7、为了取得更好的效果，需要修改/etc/modprobe.conf</p>
<p>options ipt_recent ip_list_tot=1000 ip_pkt_list_tot=60 记录10000个地址，每个地址60个包 # ip_list_tot最大为8100,超过这个数值会导致iptables错误<br>8、限制单个地址最大连接数：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">#iptables -I INPUT -p tcp --dport 80 -m connlimit --connlimit-above 50 -j DROP</div></pre></td></tr></table></figure></p>
<p>应对 ACK攻击</p>
<p>ACK 攻击是针对syn-cookies而发产生的，通过发送大量的ACK数据报，使目标服务器忙于计算，达到拒绝服务的目的，使用iptables对发起 ACK攻击的地址进行限制<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">#iptables -I INPUT -p tcp --dport 80 -m connlimit --connlimit-above 50 -j DROP</div></pre></td></tr></table></figure></p>
<p>限制并发连接数不大于50<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">#iptables -t filter -A INPUT -p tcp --dport 80 --tcp-flags FIN,SYN,RST,ACK ACK -m connlimit --connlimit-above 10 --connlimit-mask 32 -j REJECT</div></pre></td></tr></table></figure></p>
<p>限制并发ACK不大于50</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">#iptables -t filter -A INPUT -p tcp --dport 80 --tcp-flags FIN,SYN,RST,ACK ACK -m recent --set --name drop</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">#iptables -t filter -A INPUT -p tcp --dport 80 --tcp-flags FIN,SYN,RST,ACK ACK -m recent --update --seconds 60 --hitcount 30 -j DROP</div></pre></td></tr></table></figure>
<p>一分钟内大于30次的连接全部丢弃<br>应对CC攻击</p>
<p>普通的CC攻击特点是所有的连接都是正常的完整的连接，这样的连接一般的防火墙是很难预防的。但是既然是网络攻击必然也具有网络攻击的共同特点，也 就是每一个攻击源都会发起尽量多的连接，因此我们仍然可以使用限制单个地址并发链接数量的办法来实现对CC攻击的抵御。具体命令同上</p>
<p>webcc，想必之下似乎更加难以预防，但是由于所有的访问都是由相同的一个或几个网站中转而来，这些访问请求的http_reffer都会带有这 些中转站的地址。我们只要在web服务器上设置http_reffer过滤即可大幅减小webcc攻击的影响，具体的设置这里就略过不表了</p>
<p>附：如何为RHEL5增加connlimit模块<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div></pre></td><td class="code"><pre><div class="line">#wget ftp://ftp.netfilter.org/pub/patch-o-matic-ng/snapshot/patch-o-matic-ng-20080214.tar.bz2</div><div class="line">#wget ftp://ftp.netfilter.org/pub/iptables/iptables-1.4.0.tar.bz2</div><div class="line">#</div><div class="line">bunzip2 iptables-1.4.0.tar.bz2 </div><div class="line">#</div><div class="line">tar xvf iptables-1.4.0.tar </div><div class="line"># </div><div class="line">bunzip2 patch-o-matic-ng-20080214.tar.bz2 </div><div class="line"># tar xf patch-o-matic-ng-20080214.tar </div><div class="line">#</div><div class="line">cd patch-o-matic-ng-20080214</div><div class="line">下载connlimit模块</div><div class="line"></div><div class="line"># export KERNEL_DIR=/usr/src/kernels/2.6.18-8.el5-i686/ </div><div class="line"># export IPTABLES_DIR=/root/iptables-1.4.0</div><div class="line"># ./runme --download</div><div class="line"></div><div class="line">Successfully downloaded external patch geoip</div><div class="line">Successfully downloaded external patch condition</div><div class="line">Successfully downloaded external patch IPMARK</div><div class="line">Successfully downloaded external patch ROUTE</div><div class="line">Successfully downloaded external patch connlimit</div><div class="line">Successfully downloaded external patch ipp2p</div><div class="line">Successfully downloaded external patch time</div><div class="line">./patchlets/ipv4options exists and is not external</div><div class="line">./patchlets/TARPIT exists and is not external</div><div class="line">Failed to get http://www.intra2net.com/de/produkte/opensource/ipt_account//index, skipping..</div><div class="line">Successfully downloaded external patch pknock</div><div class="line">Loading patchlet definitions........................ done</div><div class="line"></div><div class="line"></div><div class="line">Excellent! Source trees are ready for compilation.</div><div class="line">把connlimit应用到内核</div><div class="line"></div><div class="line"># ./runme connlimit</div><div class="line">Loading patchlet definitions........................ done</div><div class="line">Welcome to Patch-o-matic ($Revision: 6736 $)!</div><div class="line"></div><div class="line">Kernel:</div><div class="line">2.6.18, /usr/src/kernels/2.6.18-8.el5-i686/</div><div class="line">Iptables: 1.4.0, /root/iptables-1.4.0/</div><div class="line">Each patch is a new feature: many have minimal impact, some do not.</div><div class="line">Almost every one has bugs, so don&apos;t apply what you don&apos;t need!</div><div class="line">-------------------------------------------------------</div><div class="line">Already applied: </div><div class="line">Testing connlimit... not applied</div><div class="line">The connlimit patch:</div><div class="line"></div><div class="line">Author: Gerd Knorr &lt;kraxel@bytesex.org&gt;</div><div class="line"></div><div class="line">Status: ItWorksForMe[tm]</div><div class="line"></div><div class="line">This adds an iptables match which allows you to restrict the</div><div class="line">number of parallel TCP connections to a server per client IP address</div><div class="line">(or address block).</div><div class="line"></div><div class="line">Examples:</div><div class="line"></div><div class="line"># allow 2 telnet connections per client host</div><div class="line">iptables -p tcp --syn --dport 23 -m connlimit --connlimit-above 2 -j REJECT</div><div class="line"></div><div class="line"># you can also match the other way around:</div><div class="line">iptables -p tcp --syn --dport 23 -m connlimit ! --connlimit-above 2 -j ACCEPT</div><div class="line"></div><div class="line"># limit the nr of parallel http requests to 16 per class C sized</div><div class="line"># network (24 bit netmask)</div><div class="line">iptables -p tcp --syn --dport 80 -m connlimit --connlimit-above 16 \</div><div class="line"></div><div class="line">--connlimit-mask 24 -j REJECT</div><div class="line">-----------------------------------------------------------------</div><div class="line">Do you want to apply this patch [N/y/t/f/a/r/b/w/q/?] y</div><div class="line"></div><div class="line">Excellent! Source trees are ready for compilation.</div><div class="line">内核编译</div><div class="line"># make oldconfig</div><div class="line">scripts/kconfig/conf -o arch/i386/Kconfig</div><div class="line">*</div><div class="line">* Linux Kernel Configuration</div><div class="line">*</div><div class="line">*</div><div class="line">* Code maturity level options</div><div class="line">*</div><div class="line">Prompt for development and/or incomplete code/drivers (EXPERIMENTAL) [Y/n/?] y</div><div class="line"></div><div class="line">*</div><div class="line">* General setup</div><div class="line">………………………………………………………………………………………………………………………………………………………..</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">ARP tables support (IP_NF_ARPTABLES) [M/n/?] m</div><div class="line"></div><div class="line">ARP packet filtering (IP_NF_ARPFILTER) [M/n/?] m</div><div class="line"></div><div class="line">ARP payload mangling (IP_NF_ARP_MANGLE) [M/n/?] m</div><div class="line"></div><div class="line">Connections/IP limit match support (IP_NF_MATCH_CONNLIMIT) [N/m/?] (NEW) m</div><div class="line">提示加入了connlimit的选项，问使用哪一种模式，编译进内核还是模块，输入“m”，编译为模块</div><div class="line"></div><div class="line">CRC16 functions (CRC16) [M/n/y/?] m</div><div class="line">CRC32 functions (CRC32) [Y/?] y</div><div class="line">CRC32c (Castagnoli, et al) Cyclic Redundancy-Check (LIBCRC32C) [Y/?] y</div><div class="line">#</div><div class="line"># configuration written to .config</div><div class="line">#</div><div class="line">编译模块</div><div class="line"></div><div class="line"># make modules_prepare</div><div class="line">scripts/kconfig/conf -s arch/i386/Kconfig</div><div class="line"></div><div class="line">CHK</div><div class="line">include/linux/version.h</div><div class="line"></div><div class="line">CHK</div><div class="line">include/linux/utsrelease.h</div><div class="line"></div><div class="line">HOSTCC</div><div class="line">scripts/genksyms/genksyms.o</div><div class="line"></div><div class="line">HOSTCC</div><div class="line">scripts/genksyms/lex.o</div><div class="line"></div><div class="line">HOSTCC</div><div class="line">scripts/genksyms/parse.o</div><div class="line"></div><div class="line">HOSTLD</div><div class="line">scripts/genksyms/genksyms</div><div class="line"></div><div class="line">CC</div><div class="line">scripts/mod/empty.o</div><div class="line"></div><div class="line">MKELF</div><div class="line">scripts/mod/elfconfig.h</div><div class="line"></div><div class="line">HOSTCC</div><div class="line">scripts/mod/file2alias.o</div><div class="line"></div><div class="line">HOSTCC</div><div class="line">scripts/mod/modpost.o</div><div class="line"></div><div class="line">HOSTCC</div><div class="line">scripts/mod/sumversion.o</div><div class="line"></div><div class="line">HOSTLD</div><div class="line">scripts/mod/modpost</div><div class="line">[root@localhost 2.6.18-8.el5-i686]# mv net/ipv4/netfilter/Makefile </div><div class="line">net/ipv4/netfilter/Makefile.bak</div><div class="line">备份原来的文件</div><div class="line"></div><div class="line"># make M=net/ipv4/netfilter/</div><div class="line"></div><div class="line">LD</div><div class="line">net/ipv4/netfilter/built-in.o</div><div class="line"></div><div class="line">CC [M]</div><div class="line">net/ipv4/netfilter/ipt_connlimit.o</div><div class="line"></div><div class="line">Building modules, stage 2.</div><div class="line"></div><div class="line">MODPOST</div><div class="line"></div><div class="line">CC</div><div class="line">net/ipv4/netfilter/ipt_connlimit.mod.o</div><div class="line"></div><div class="line">LD [M]</div><div class="line">net/ipv4/netfilter/ipt_connlimit.ko</div><div class="line"></div><div class="line">#</div><div class="line">cp net/ipv4/netfilter/ipt_connlimit.ko /lib/modules/2.6.18-8.el5/kernel/net/ipv4/netfilter/</div><div class="line"># chmod 744 /lib/modules/2.6.18-8.el5/kernel/net/ipv4/netfilter/ipt_connlimit.ko </div><div class="line"></div><div class="line"># depmod -a</div><div class="line">[root@localhost 2.6.18-8.el5-i686]# modprobe ipt_connlimit</div><div class="line"># lsmod |grep conn</div><div class="line">ip_conntrack_netbios_ns</div><div class="line">6977</div><div class="line">0 </div><div class="line">ipt_connlimit</div><div class="line">7680</div><div class="line">6 </div><div class="line">ip_conntrack</div><div class="line">53153</div><div class="line">3 ip_conntrack_netbios_ns,xt_state,ipt_connlimit</div><div class="line">nfnetlink</div><div class="line">10713</div><div class="line">1 ip_conntrack</div><div class="line">x_tables</div><div class="line">17349</div><div class="line">8 ipt_recent,xt_state,ipt_REJECT,ipt_connlimit,ip_tables,ip6t_REJECT,xt_tcpudp,ip6_tables</div></pre></td></tr></table></figure></p>
<p>好了，模块安装完毕。可以使用connlimit策略了</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;三次握手的过程及相关概念&lt;br&gt;TCP/IP协议使用三次握手来建立连接，过程如下：&lt;br&gt;1、第一次握手，客户端发送数据包syn到服务器，并进入SYN_SEND状态，等待回复&lt;br&gt;2、第二次握手，服务器发送数据报syn/ack，给客户机，并进入SYN_RECV状态，等待回复&lt;br&gt;3、第三次握手，客户端发送数据包ACK给客户机，发送完成后，客户端和服务器进入ESTABLISHED状态，链接建立完成&lt;/p&gt;
&lt;p&gt;三次握手协议中，服务器维护一个等待队列，收到一个syn包就在队列中建立一个条目，并分配一定的资源。对应的每一个条目表示已经收到一个syn请 求，并已经回复syn/ack，服务器上对应的连接已经进入SYN_RECV状态，等待客户端响应，收到客户端的响应包以后，该连接进入 ESTABLISHED状态，队列中对应的条目被删除。&lt;br&gt;backlog参数：设定等待队列的最大数目。对应内核参数：net.ipv4.tcp_max_syn_backlog = 1024&lt;br&gt;syn-ack重传次数：服务器发送syn/ack包，如果没有收到客户端的相应，就会重传syn/ack，超过一定时间之后会进行第二次重传，超过设定 次数以后将该条目从队列中删除。每次重传的间隔时间并不确定。对应的内核参数：net.ipv4.tcp_synack_retries = 5&lt;br&gt;syn重传次数：概念和syn/ack重传次数类似，对应的内核参数：net.ipv4.tcp_syn_retries = 5&lt;br&gt;等待存活时间：指等待队列的条目存活时间，即从服务器收到syn包到确认这个包无效的最长时间，该时间是所有重传包请求的最长等待时间&lt;br&gt;
    
    </summary>
    
      <category term="网络安全" scheme="http://sunhao.win/categories/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/"/>
    
    
      <category term="CC攻击" scheme="http://sunhao.win/tags/CC%E6%94%BB%E5%87%BB/"/>
    
      <category term="SYN攻击" scheme="http://sunhao.win/tags/SYN%E6%94%BB%E5%87%BB/"/>
    
      <category term="ACK攻击" scheme="http://sunhao.win/tags/ACK%E6%94%BB%E5%87%BB/"/>
    
  </entry>
  
  <entry>
    <title>服务器网站被CC攻击的解决方法</title>
    <link href="http://sunhao.win/2017/02/24/safe-cc/"/>
    <id>http://sunhao.win/2017/02/24/safe-cc/</id>
    <published>2017-02-24T06:02:15.000Z</published>
    <updated>2017-02-24T07:53:54.141Z</updated>
    
    <content type="html"><![CDATA[<p>作为站长或者公司的网站的网管，什么最可怕？显然是网站受到的DDoS攻击。大家都有这样的经历，就是在访问某一公司网站或者论坛时，如果这个网站或者论坛流量比较大，访问的人比较多，打开页面的速度会比较慢，对不?!一般来说，访问的人越多，网站或论坛的页面越多，数据库就越大，被访问的频率也越高，占用的系统资源也就相当可观。</p>
<p>首先，什么事CC攻击？</p>
<p>攻击者借助代理服务器生成指向受害主机的合法请求，实现DDOS,和伪装就叫：CC(ChallengeCollapsar)。<br>CC主要是用来攻击页面的。大家都有这样的经历，就是在访问论坛时，如果这个论坛比较大，访问的人比较多，打开页面的速度会比较慢，访问的人越多，论坛的页面越多，数据库就越大，被访问的频率也越高，占用的系统资源也就相当可观。<br><a id="more"></a><br>一个静态页面不需要服务器多少资源，甚至可以说直接从内存中读出来发给你就可以了，但是论坛就不一样了，我看一个帖子，系统需要到数据库中判断我是否有读帖子的权限，如果有，就读出帖子里面的内容，显示出来——这里至少访问了2次数据库，如果数据库的数据容量有200MB大小，系统很可能就要在这200MB大小的数据空间搜索一遍，这需要多少的CPU资源和时间？如果我是查找一个关键字，那么时间更加可观，因为前面的搜索可以限定在一个很小的范围内，比如用户权限只查用户表，帖子内容只查帖子表，而且查到就可以马上停止查询，而搜索肯定会对所有的数据进行一次判断，消耗的时间是相当的大。<br>CC就是充分利用了这个特点，模拟多个用户（多少线程就是多少用户）不停的进行访问（访问那些需要大量数据操作，就是需要大量CPU时间的页面）.这一点用一个一般的性能测试软件就可以做到大量模拟用户并发。</p>
<p>CC攻击是DDoS(分布式拒绝服务)的一种，相比其它的DDoS攻击CC似乎更有技术含量一些。这种攻击你见不到虚假IP，见不到特别大的异常流量，但造成服务器无法进行正常连接，一条ADSL的普通用户足以挂掉一台高性能的Web服务器。由此可见其危害性，称其为”Web杀手”毫不为过。最让站长们忧虑的是这种攻击技术含量不是很高，利用工具和一些IP代理，一个初、中级的电脑水平的用户就能够实施DDoS攻击。</p>
<p>那么怎样保证这些网站服务器的安全呢？防护CC攻击大家有必要了解CC攻击的原理及如果发现CC攻击和对CC攻击的防范措施。</p>
<p>一、CC攻击的原理：<br>CC攻击的原理就是攻击者控制某些主机不停地发大量数据包给对方服务器造成服务器资源耗尽，一直到宕机崩溃。CC主要是用来攻击页面的，每个人都有这样的体验：当一个网页访问的人数特别多的时候，打开网页就慢了，CC就是模拟多个用户(多少线程就是多少用户)不停地进行访问那些需要大量数据操作(就是需要大量CPU时间)的页面，造成服务器资源的浪费，CPU长时间处于100%，永远都有处理不完的连接直至就网络拥塞，正常的访问被中止。</p>
<p>二、CC攻击的种类：<br>CC攻击的种类有三种，直接攻击，代理攻击，僵尸网络攻击。</p>
<p>直接攻击主要针对有重要缺陷的WEB应用程序，一般说来是程序写的有问题的时候才会出现这种情况，比较少见。</p>
<p>僵尸网络攻击有点类似于DDOS攻击了，从WEB应用程序层面上已经无法防御。</p>
<p>代理攻击：CC攻击者一般会操作一批代理服务器，比方说100个代理，然后每个代理同时发出10个请求，这样WEB服务器同时收到1000个并发请求的，并且在发出请求后，立刻断掉与代理的连接，避免代理返回的数据将本身的带宽堵死，而不能发动再次请求，这时WEB服务器会将响应这些请求的进程进行队列，数据库服务器也同样如此，这样一来，正常请求将会被排在很后被处理，就象本来你去食堂吃饭时，一般只有不到十个人在排队，今天前面却插了一千个人，那么轮到你的机会就很小很小了，这时就出现页面打开极其缓慢或者白屏。</p>
<p>三、攻击症状<br>CC攻击有一定的隐蔽性，那如何确定服务器正在遭受或者曾经遭受CC攻击呢?我们可以通过以下三个方法来确定。</p>
<p>(1).命令行法<br>一般遭受CC攻击时，Web服务器会出现80端口对外关闭的现象，因为这个端口已经被大量的垃圾数据堵塞了正常的连接被中止了。我们可以通过在命令行下输入命令netstat-an来查看，如果看到类似如下有大量显示雷同的连接记录基本就可以被CC攻击了：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">……</div><div class="line"></div><div class="line">TCP 192.168.1.3:80 192.168.1.6:2205 SYN_RECEIVED 4</div><div class="line"></div><div class="line">TCP 192.168.1.3:80 192.168.1.6: 2205 SYN_RECEIVED 4</div><div class="line"></div><div class="line">TCP 192.168.1.3:80 192.168.1.6: 2205 SYN_RECEIVED 4</div><div class="line"></div><div class="line">TCP 192.168.1.3:80 192.168.1.6: 2205 SYN_RECEIVED 4</div><div class="line"></div><div class="line">TCP 192.168.1.3:80 192.168.1.6: 2205 SYN_RECEIVED 4</div><div class="line"></div><div class="line">……</div></pre></td></tr></table></figure></p>
<p>其中”192.168.1.6”就是被用来代理攻击的主机的IP，”SYN_RECEIVED”是TCP连接状态标志，意思是”正在处于连接的初始同步状态”，表明无法建立握手应答处于等待状态。这就是攻击的特征，一般情况下这样的记录一般都会有很多条，表示来自不同的代理IP的攻击。</p>
<p>(2).批处理法<br>上述方法需要手工输入命令且如果Web服务器IP连接太多看起来比较费劲，我们可以建立一个批处理文件，通过该脚本代码确定是否存在CC攻击。打开记事本键入如下代码保存为CC.bat：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">@echooff</div><div class="line"></div><div class="line">time /t &gt;&gt;log.log</div><div class="line"></div><div class="line">netstat -n -p tcp |find &quot;:80&quot;&gt;&gt;Log.log</div><div class="line"></div><div class="line">notepad log.log</div><div class="line"></div><div class="line">exit</div></pre></td></tr></table></figure></p>
<p>上面的脚本的含义是筛选出当前所有的到80端口的连接。当我们感觉服务器异常是就可以双击运行该批处理文件，然后在打开的log.log文件中查看所有的连接。如果同一个IP有比较多的到服务器的连接，那就基本可以确定该IP正在对服务器进行CC攻击。</p>
<p>(3).查看系统日志<br>上面的两种方法有个弊端，只可以查看当前的CC攻击，对于确定Web服务器之前是否遭受CC攻击就无能为力了，此时我们可以通过Web日志来查，因为Web日志忠实地记录了所有IP访问Web资源的情况。通过查看日志我们可以Web服务器之前是否遭受CC攻击，并确定攻击者的IP然后采取进一步的措施。</p>
<p>Web日志一般在C:\WINDOWS\system32\LogFiles\HTTPERR目录下，该目录下用类似httperr1.log的日志文件，这个文件就是记录Web访问错误的记录。管理员可以依据日志时间属性选择相应的日志打开进行分析是否Web被CC攻击了。默认情况下，Web日志记录的项并不是很多，我们可以通过IIS进行设置，让Web日志记录更多的项以便进行安全分析。其操作步骤是：</p>
<p>“开始→管理工具”打开”Internet信息服务器”，展开左侧的项定位到到相应的Web站点，然后右键点击选择”属性”打开站点属性窗口，在”网站”选项卡下点击”属性”按钮，在”日志记录属性”窗口的”高级”选项卡下可以勾选相应的”扩展属性”，以便让Web日志进行记录。比如其中的”发送的字节数”、”接收的字节数”、”所用时间”这三项默认是没有选中的，但在记录判断CC攻击中是非常有用的，可以勾选。另外，如果你对安全的要求比较高，可以在”常规”选项卡下对”新日志计划”进行设置，让其”每小时”或者”每一天”进行记录。为了便于日后进行分析时好确定时间可以勾选”文件命名和创建使用当地时间”。</p>
<p>四、CC攻击防御策略<br>确定Web服务器正在或者曾经遭受CC攻击，那如何进行有效的防范呢?</p>
<p>(1).取消域名绑定<br>一般cc攻击都是针对网站的域名进行攻击，比如我们的网站域名是”www.star-net.cn”，那么攻击者就在攻击工具中设定攻击对象为该域名然后实施攻击。</p>
<p>对于这样的攻击我们的措施是在IIS上取消这个域名的绑定，让CC攻击失去目标。具体操作步骤是：打开”IIS管理器”定位到具体站点右键”属性”打开该站点的属性面板，点击IP地址右侧的”高级”按钮，选择该域名项进行编辑，将”主机头值”删除或者改为其它的值(域名)。</p>
<p>经过模拟测试，取消域名绑定后Web服务器的CPU马上恢复正常状态，通过IP进行访问连接一切正常。但是不足之处也很明显，取消或者更改域名对于别人的访问带来了不变，另外，对于针对IP的CC攻击它是无效的，就算更换域名攻击者发现之后，他也会对新域名实施攻击。</p>
<p>(2).域名欺骗解析<br>如果发现针对域名的CC攻击，我们可以把被攻击的域名解析到127.0.0.1这个地址上。我们知道127.0.0.1是本地回环IP是用来进行网络测试的，如果把被攻击的域名解析到这个IP上，就可以实现攻击者自己攻击自己的目的，这样他再多的肉鸡或者代理也会宕机，让其自作自受。</p>
<p>另外，当我们的Web服务器遭受CC攻击时把被攻击的域名解析到国家有权威的政府网站或者是网警的网站，让其网警来收拾他们。</p>
<p>现在一般的Web站点都是利用类似”新网”这样的服务商提供的动态域名解析服务，大家可以登录进去之后进行设置。</p>
<p>(3).更改Web端口<br>一般情况下Web服务器通过80端口对外提供服务，因此攻击者实施攻击就以默认的80端口进行攻击，所以，我们可以修改Web端口达到防CC攻击的目的。运行IIS管理器，定位到相应站点，打开站点”属性”面板，在”网站标识”下有个TCP端口默认为80，我们修改为其他的端口就可以了。</p>
<p>(4).IIS屏蔽IP<br>我们通过命令或在查看日志发现了CC攻击的源IP，就可以在IIS中设置屏蔽该IP对Web站点的访问，从而达到防范IIS攻击的目的。在相应站点的”属性”面板中，点击”目录安全性”选项卡，点击”IP地址和域名现在”下的”编辑”按钮打开设置对话框。在此窗口中我们可以设置”授权访问”也就是”白名单”，也可以设置”拒绝访问”即”黑名单”。比如我们可以将攻击者的IP添加到”拒绝访问”列表中，就屏蔽了该IP对于Web的访问。</p>
<p>五、CC攻击的防范手段<br>防止CC攻击，不一定非要用高防服务器。比如，用防CC攻击软件就可以有效的防止CC攻击。推荐一些CC的防范手段：</p>
<p>1、优化代码<br>尽可能使用缓存来存储重复的查询内容，减少重复的数据查询资源开销。减少复杂框架的调用，减少不必要的数据请求和处理逻辑。程序执行中，及时释放资源，比如及时关闭mysql连接，及时关闭memcache连接等，减少空连接消耗。</p>
<p>2、限制手段<br>对一些负载较高的程序增加前置条件判断，可行的判断方法如下：</p>
<p>必须具有网站签发的session信息才可以使用（可简单阻止程序发起的集中请求）；必须具有正确的referer（可有效防止嵌入式代码的攻击）；禁止一些客户端类型的请求（比如一些典型的不良蜘蛛特征）；同一session多少秒内只能执行一次。</p>
<p>3、完善日志<br>尽可能完整保留访问日志。日志分析程序，能够尽快判断出异常访问，比如单一ip密集访问；比如特定url同比请求激增。</p>
<p>六、针对CC攻击的商业解决方案<br>很多的网站管理者是等到网站遭到攻击了，受到损失了，才去寻求解决的方案，在将来的互联网飞速发展的时代，一定要有安全隐患意识，不要等到损失大了，再去想办法来补救，这样为时已晚。然而当网站受到攻击时，大多数人想到的是—–快点找硬防，基本上都步了一个误区，就是认为网站或者服务器被攻击，购买硬件防火墙，什么事都万事大吉了，实际上这样的想法是极端错误的。多年的统计数据表明，想彻底解CC攻击是几乎不可能的，就好比治疗感冒一样，我们可以治疗，也可以预防，但却无法根治，但我们若采取积极有效的防御方法，则可在很大程度上降低或减缓生病的机率，防治DDOS攻击也是如此。</p>
<p>实际上比较理想解决方案应该是”软件+硬件”的解决方案。此方案对于资金较为充足的企业网站来说，这个方案适合他们；硬件在DDOS防护上有优势，软件CC防护上有优势；相对于一些对于ICP内容网站、论坛社区BBS、电子商务eBusiness、音乐网站Music、电影网站File等网站服务器越来越普及，但由于种种原因往往会遭受竞争对手或打击报复者的恶意DDOS攻击，持续的攻击会导致大量用户流失，严重的甚至因人气全失而被迫关闭服务器，为了最大程度的保护运营者的利益，冰盾科技结合多年抗DDOS的实践经验给出了最少的安全投资可获得最大安全回报的抗DDOS解决方案。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;作为站长或者公司的网站的网管，什么最可怕？显然是网站受到的DDoS攻击。大家都有这样的经历，就是在访问某一公司网站或者论坛时，如果这个网站或者论坛流量比较大，访问的人比较多，打开页面的速度会比较慢，对不?!一般来说，访问的人越多，网站或论坛的页面越多，数据库就越大，被访问的频率也越高，占用的系统资源也就相当可观。&lt;/p&gt;
&lt;p&gt;首先，什么事CC攻击？&lt;/p&gt;
&lt;p&gt;攻击者借助代理服务器生成指向受害主机的合法请求，实现DDOS,和伪装就叫：CC(ChallengeCollapsar)。&lt;br&gt;CC主要是用来攻击页面的。大家都有这样的经历，就是在访问论坛时，如果这个论坛比较大，访问的人比较多，打开页面的速度会比较慢，访问的人越多，论坛的页面越多，数据库就越大，被访问的频率也越高，占用的系统资源也就相当可观。&lt;br&gt;
    
    </summary>
    
      <category term="网络安全" scheme="http://sunhao.win/categories/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/"/>
    
    
      <category term="CC攻击" scheme="http://sunhao.win/tags/CC%E6%94%BB%E5%87%BB/"/>
    
      <category term="DDOS攻击" scheme="http://sunhao.win/tags/DDOS%E6%94%BB%E5%87%BB/"/>
    
  </entry>
  
  <entry>
    <title>study clojure</title>
    <link href="http://sunhao.win/2017/02/21/study-clojure/"/>
    <id>http://sunhao.win/2017/02/21/study-clojure/</id>
    <published>2017-02-21T13:41:25.000Z</published>
    <updated>2017-02-21T13:41:25.076Z</updated>
    
    <content type="html"><![CDATA[<a id="more"></a>]]></content>
    
    <summary type="html">
    
      &lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Compass中文手册</title>
    <link href="http://sunhao.win/2017/01/11/compass/"/>
    <id>http://sunhao.win/2017/01/11/compass/</id>
    <published>2017-01-11T07:10:57.000Z</published>
    <updated>2017-03-03T08:57:26.022Z</updated>
    
    <content type="html"><![CDATA[<h1 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h1><p>compass目前已经不再维护，但有些东西仍值得学习。</p>
<p><strong>Version: 1.0.1</strong></p>
<h2 id="开始使用Compass"><a href="#开始使用Compass" class="headerlink" title="开始使用Compass"></a>开始使用Compass</h2><p>Compass 是一款使用<a href="http://sass-lang.com" target="_blank" rel="external">Sass语言</a> 编写的开源的css设计框架，使用<br>起来强大和简单. 如果你对Sass不熟悉, 可以去<a href="http://sass-lang.com" target="_blank" rel="external">sass-lang.com</a>学习如何使用.</p>
<h2 id="安装Compass"><a href="#安装Compass" class="headerlink" title="安装Compass"></a>安装Compass</h2><p>请按照<a href="http://compass-style.org/install/" target="_blank" rel="external">Compass 安装指南</a>按步骤安装Compass和Sass。</p>
<p>如果需要验证版本，可以运行以下命令:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ compass version</div></pre></td></tr></table></figure>
<a id="more"></a>
<h2 id="监视和编译你的项目"><a href="#监视和编译你的项目" class="headerlink" title="监视和编译你的项目"></a>监视和编译你的项目</h2><p>（ps：watch参数就是，监控你的项目是否则有文件改动，一旦有改动，就自动转成css。）</p>
<p>当开发项目时, 你可以运行compass监视器 ，自动修改你的css文件到最新状态。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ cd /path/to/project</div><div class="line">$ compass watch</div></pre></td></tr></table></figure>
<p>当在生产环境中编译你的css文件的时, 通过 –production 编译器将默认对终端(就是我们用的浏览器)优化输出(其实就是精简):</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ compass compile --production</div></pre></td></tr></table></figure>
<h2 id="使用Compass不用命令行"><a href="#使用Compass不用命令行" class="headerlink" title="使用Compass不用命令行"></a>使用Compass不用命令行</h2><p>你可以不用compass命令行. 在一些情况下, 对于一些不是明确支持Compasssass编译器和框架，这样更容易集成.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">$ gem install compass-core</div><div class="line">$ cat &lt;&lt;- EOF &gt; _project-setup.scss</div><div class="line">\$project-path: absolute-path(join-file-segments(<span class="string">".."</span>));</div><div class="line">@<span class="keyword">import</span> <span class="string">"compass/configuration"</span>;</div><div class="line">\$compass-options: (http_path: <span class="string">"/"</span>);</div><div class="line">@include compass-configuration(\$compass-options);</div><div class="line">EOF</div><div class="line">Add to the top <span class="keyword">of</span> each sass file: @<span class="keyword">import</span> <span class="string">"project-setup"</span>;</div><div class="line">Compile using the Sass command line:</div><div class="line">$ sass -r compass-core --update sass:css</div></pre></td></tr></table></figure></p>
<p>详情请读: <a href="http://compass-style.org/help/documentation/sass-based-configuration-options/" target="_blank" rel="external">Compass’s Sass-based配置选项</a>.</p>
<h2 id="更多配置命令"><a href="#更多配置命令" class="headerlink" title="更多配置命令"></a>更多配置命令</h2><p>所有compass命令的文档可以通过运行下面的代码发现:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ compass help</div></pre></td></tr></table></figure></p>
<p>可以设置一个可选参数，指定具体的一个命令:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ compass help &lt;command&gt;</div></pre></td></tr></table></figure></p>
<p> <command> 就是指定的命令参数 (例如. compile)</p>
<h1 id="教程"><a href="#教程" class="headerlink" title="教程"></a>教程</h1><h2 id="教程-1"><a href="#教程-1" class="headerlink" title="教程"></a>教程</h2><h3 id="Compass-教程"><a href="#Compass-教程" class="headerlink" title="Compass 教程"></a>Compass 教程</h3><p>这个教程还在改进, 如果这里还有什么教程没有涉及到，请看 <a href="http://groups.google.com/group/compass-users" target="_blank" rel="external">Compass 联络表</a>， 那里有很多compass大神帮你解决。</p>
<h3 id="Compass入门"><a href="#Compass入门" class="headerlink" title="Compass入门"></a>Compass入门</h3><p>如果你对Compass不熟悉, 你最好看看 <a href="http://compass-style.org/help/tutorials/best_practices/" target="_blank" rel="external">最佳练习</a>,  <a href="http://compass-style.org/help/tutorials/configuration-reference/" target="_blank" rel="external">配置参照</a>, <a href="http://compass-style.org/help/tutorials/configurable-variables/" target="_blank" rel="external">变量配置</a>, 还有 <a href="http://compass-style.org/help/tutorials/command-line/" target="_blank" rel="external">命令行手册</a>.</p>
<h3 id="贡献点"><a href="#贡献点" class="headerlink" title="贡献点?"></a>贡献点?</h3><p>如果你使用Compass中有些建议和想法, 可以看下<a href="http://compass-style.org/help/tutorials/contributing/" target="_blank" rel="external">贡献</a> 和 <a href="http://compass-style.org/help/tutorials/extensions/" target="_blank" rel="external">创建插件</a>.</p>
<h2 id="应用集成"><a href="#应用集成" class="headerlink" title="应用集成"></a>应用集成</h2><h3 id="应用集成-1"><a href="#应用集成-1" class="headerlink" title="应用集成"></a>应用集成</h3><h4 id="Ruby-on-Rails"><a href="#Ruby-on-Rails" class="headerlink" title="Ruby on Rails"></a>Ruby on Rails</h4><p>Rails 3.1（一款构建在 Ruby 语言之上的一款web框架）</p>
<p>添加compass到你的依赖中:</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gem <span class="string">'compass'</span></div></pre></td></tr></table></figure>
<p>也可以去 <a href="https://gist.github.com/1184843" target="_blank" rel="external">gist</a>(一款代码分享平台)看看</p>
<p>Rails 3</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">compass init rails /path/to/myrailsproject</div></pre></td></tr></table></figure>
<p>Rails 2.3</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rake <span class="symbol">rails:</span>template LOCATION=<span class="symbol">http:</span>/<span class="regexp">/compass-style.org/rails</span><span class="regexp">/installer</span></div></pre></td></tr></table></figure>
<h3 id="Sinatra"><a href="#Sinatra" class="headerlink" title="Sinatra"></a>Sinatra</h3><h4 id="Sinatra-（基于ruby的微型web框架）"><a href="#Sinatra-（基于ruby的微型web框架）" class="headerlink" title="Sinatra （基于ruby的微型web框架）"></a>Sinatra （基于ruby的微型web框架）</h4><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">require</span> <span class="string">'compass'</span></div><div class="line"><span class="keyword">require</span> <span class="string">'sinatra'</span></div><div class="line"><span class="keyword">require</span> <span class="string">'haml'</span></div><div class="line"></div><div class="line">configure <span class="keyword">do</span></div><div class="line">  set <span class="symbol">:haml</span>, &#123;<span class="symbol">:format</span> =&gt; <span class="symbol">:html5</span>&#125;</div><div class="line">  set <span class="symbol">:scss</span>, &#123;<span class="symbol">:style</span> =&gt; <span class="symbol">:compact</span>, <span class="symbol">:debug_info</span> =&gt; <span class="literal">false</span>&#125;</div><div class="line">  Compass.add_project_configuration(File.join(settings.root, <span class="string">'config'</span>, <span class="string">'compass.rb'</span>))</div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line">get <span class="string">'/stylesheets/:name.css'</span> <span class="keyword">do</span></div><div class="line">  content_type <span class="string">'text/css'</span>, <span class="symbol">:charset</span> =&gt; <span class="string">'utf-8'</span></div><div class="line">  scss <span class="symbol">:<span class="string">"stylesheets/<span class="subst">#&#123;params[<span class="symbol">:name</span>]&#125;</span>"</span></span>, Compass.sass_engine_options</div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line">get <span class="string">'/'</span> <span class="keyword">do</span></div><div class="line">  haml <span class="symbol">:index</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>假设你保存配置文件到 <code>config/compass.rb</code>. 如果你保存样式表到 “views/stylesheets/” 目录，而不是  “views/”, 记得按你设置好的配置更新 <code>sass_dir</code> . 看看 <a href="https://gist.github.com/1184843" target="_blank" rel="external">sample compass-sinatra project</a> 实时运行!</p>
<p><a href="https://github.com/adamstac/sinatra-bootstrap" target="_blank" rel="external">Sinatra Bootstrap</a> - 一个 支持Haml, Sass, Compass, jQuery 等 的Sinatra项目.</p>
<h3 id="nanoc"><a href="#nanoc" class="headerlink" title="nanoc"></a>nanoc</h3><p>nanoc 是一个用 Ruby 实现的静态网页产生工具</p>
<p>最小集成: 只需要拖他进去</p>
<p>最简单的途径集成compass到nanoc. 更改 <code>config.rb</code> 指向到你所使用的样式表. 你需要单独运行一个窗口用Compass watch命令监控编译nanoc程序.</p>
<p>实力项目，如: <a href="https://github.com/unthinkingly/unthinkingly-blog" target="_blank" rel="external">unthinkingly</a>.</p>
<p>标准集成</p>
<p>Nanoc文件规范的首要要点, 像这样加载 Compass 配置文件:<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">require</span> <span class="string">'compass'</span></div><div class="line"></div><div class="line">Compass.add_project_configuration <span class="string">'compass.rb'</span><span class="comment"># when using Compass &gt; 0.10</span></div><div class="line">sass_options = Compass.sass_engine_options<span class="comment"># when using Compass &gt; 0.10</span></div><div class="line"></div><div class="line">Compass.configuration.parse <span class="string">'compass.rb'</span>  <span class="keyword">when</span> using Compass &lt; <span class="number">0</span>.<span class="number">10</span></div><div class="line">sass_options = Compass.config.to_sass_engine_options  <span class="keyword">when</span> using Compass &lt; <span class="number">0</span>.<span class="number">10</span></div></pre></td></tr></table></figure></p>
<p>创建并配置一个 <code>compass.rb</code> 文件到你站点的根目录  .示例配置:<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">http_path = <span class="string">"/"</span></div><div class="line">project_path = File.expand_path(File.join(File.dirname(__FILE_<span class="number">_</span>), <span class="string">'..'</span>))</div><div class="line">css_dir = <span class="string">"output/stylesheets"</span></div><div class="line">sass_dir = <span class="string">"content/stylesheets"</span></div><div class="line">images_dir = <span class="string">"assets/images"</span></div><div class="line">javascripts_dir = <span class="string">"assets/javascripts"</span></div><div class="line">fonts_dir = <span class="string">"assets/fonts"</span></div><div class="line">http_javascripts_dir = <span class="string">"javascripts"</span></div><div class="line">http_stylesheets_dir = <span class="string">"stylesheets"</span></div><div class="line">http_images_dir = <span class="string">"images"</span></div><div class="line">http_fonts_dir = <span class="string">"fonts"</span></div></pre></td></tr></table></figure></p>
<p>根据您的目录结构和配置，您可能需要更改一些目录的路径。<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">Sass 和 Compass过滤样式表, 从Compass按照配置好的sass引擎，调用sass进行过滤, 如下:</div><div class="line"></div><div class="line">    compile <span class="string">'/stylesheets/*'</span> <span class="keyword">do</span></div><div class="line">      filter <span class="symbol">:sass</span>, sass_options.merge(<span class="symbol">:syntax</span> =&gt; item[<span class="symbol">:extension</span>].to_sym)</div><div class="line">    <span class="keyword">end</span></div><div class="line"></div><div class="line">    nanoc projects using the formal approach</div></pre></td></tr></table></figure></p>
<p><a href="https://github.com/Compass/compass/tree/stable/compass-style.org" target="_blank" rel="external">站点</a></p>
<h2 id="最佳方法"><a href="#最佳方法" class="headerlink" title="最佳方法"></a>最佳方法</h2><p>按下面的方法可以使你的项目更以维护和创建.</p>
<p>使用一个Base样式表文件</p>
<p>创建一个_base.scss partial(部分) 用来初始化样式表中共同的变量和集成一些你经常使用的工具。</p>
<p>_base.scss<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">$blueprint-grid-columns : <span class="number">24</span>;</div><div class="line">$blueprint-grid-width   : <span class="number">30</span>px;</div><div class="line">$blueprint-grid-margin  : <span class="number">10</span>px;</div><div class="line">$font-color             <span class="symbol">:</span><span class="number">333</span>;</div><div class="line"></div><div class="line">@import <span class="string">"compass/reset"</span>;</div><div class="line">@import <span class="string">"compass/utilities"</span>;</div><div class="line">@import <span class="string">"blueprint"</span>;</div></pre></td></tr></table></figure></p>
<p>// etc.<br>_base.scss 同时也是储存你自定义 mixins(混合)的好地方, 所以它可以供任何样式表用。</p>
<p>你可以在其他样式表中包含它:</p>
<p>application.scss</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">@import &quot;base&quot;;</div><div class="line"></div><div class="line">#wrapper &#123;</div><div class="line">  @include container;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>// etc.<br>如果你想覆盖掉base.scss,可以在@import-ing之前，定义一些compass/framework 常量. 请参见<a href="http://compass-style.org/help/tutorials/configurable-variables/" target="_blank" rel="external">可配置的变量</a>里具体的例子. 请注意，您可以参考 <em>base.scss的，因为它是局部的,所以名字没有前置下划线和扩展名。(译者注:这里意思就是partial是公共部分，不属于私有，所以起名字的时候不要加</em>或者扩展名)</p>
<p>编写自定义Mixins</p>
<p>Mixins让你通过一条命令就可以把多个样式表插入选择器. 这样可以使你的源码避免重复，提升可维护性. 使用mixins让你的样式表源码像自己注释的文档  – 这样更易读，例如 @include round-corners(6px,f00) 要比列出多条语句强很多。</p>
<p>自由标记样式表</p>
<p>从一个站点的页面中提取出我们所关注的css样式. 这样看似更易于维护. 然而, 事实上, 由于CSS功能上的限制抽象成符合DRY原则的可维护的代码. 不过sass它能让我们能够创建完全抽象和重用的代码，允许我们把所有的样式移入到样式表里。  读这篇博客关于这个问题的更多信息</p>
<p>一旦你有整洁的标记，使用mixin和继承的样式表。整洁清晰的抽象，您应该能够阅读网页的样式表,甚至没有在Web浏览器中加载该页,就想象出页面会是什么样子。</p>
<p>如果你发现语义化的选择器使得你的css表臃肿，是时候到重构的时间了，例如，此样式表将产生不必要的膨胀:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">@mixin three-column &#123;</div><div class="line">  .container &#123; @include container;  &#125;</div><div class="line">  .header,</div><div class="line">  .footer    &#123; @include column(24); &#125;</div><div class="line">  .sidebar   &#123; @include column(6);  &#125;</div><div class="line">  article    &#123; @include column(10); &#125;</div><div class="line">  .rightbar  &#123; @include column(8);  &#125;</div><div class="line">&#125;</div><div class="line">body#article,</div><div class="line">body#snippet,</div><div class="line">body#blog-post &#123; @include three-column; &#125;</div></pre></td></tr></table></figure>
<p>相反的，问问自己，“这些页面非样式的实质共同点是什么？”在这种情况下，他们的所有内容页面，最好把这些页面的body类单独编辑。(译者注，上面的sass样式表，编写完很臃肿冗余的。这把所有页面的内容都合并在了一起。产生太多没必要的语句。所以为了省代码，不如单独写更易于维护)</p>
<p>嵌套选择器不要太多层。</p>
<p>从零开始进行样式处理或以应用程序的一些常见的基点，要比应付不想要的风格到您的新设计的容易多。这样，在标记书中使用一些选择器，最好使用一些基本嵌套样式。然后使用重构模式的出现，减少膨胀。</p>
<p>重要的是过长嵌套的选择器会导致一个小渲染的性能损失，可以减缓您的Web页面。没有必要完全模仿你的css文档结构。嵌套只有足够深的选择器是唯一的部分。例如，不要使用table thead tr th，当一个简单th选择器时就足够了。这可能意味着你必须把你的风格分成若干选择器，让文档级联工作。</p>
<h2 id="促进"><a href="#促进" class="headerlink" title="促进"></a>促进</h2><h3 id="促进Compass发展"><a href="#促进Compass发展" class="headerlink" title="促进Compass发展"></a>促进Compass发展</h3><p>感谢您有兴趣在促进compass发展。我们因你而变，如果这里有难以懂的地方，请让我们知道。<br>如果你发现文档中的错误，可以按步骤告知我们</p>
<p>Step 1: 去github上注册个账号.</p>
<p>Step 2: 用你的账户Fork Compass. </p>
<h3 id="简单改进"><a href="#简单改进" class="headerlink" title="简单改进"></a>简单改进</h3><p>感谢gihub让我们的迭代更加加单. 克隆镜像到本地，commit你的项目。</p>
<h3 id="编辑文档"><a href="#编辑文档" class="headerlink" title="编辑文档"></a>编辑文档</h3><p>compass文档存在两个地方. 一个在compass-style.org directory<br>但大部分Sass中的注释生成文档文件本身。一个在github。</p>
<h3 id="修复Bugs"><a href="#修复Bugs" class="headerlink" title="修复Bugs"></a>修复Bugs</h3><p>Step 3: 如果发现bug请及时bug，以便我们更新</p>
<p>Step 4: 如果你不知道如如何提交。点 the code</p>
<p>Step 5: 修复bug推送进度. 请务必提到的bug ID在您的提交消息，像这样:</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Fixed the display of the fizzlebuzz <span class="keyword">in</span> IE6.</div><div class="line"></div><div class="line">Closes GH-<span class="number">123</span>.</div></pre></td></tr></table></figure>
<p>Step 6: 尽可能在多个浏览器上测试</p>
<p>Step 7: 确保测试通过. 完善测试</p>
<p>可以提交代码了</p>
<h3 id="更改样式表"><a href="#更改样式表" class="headerlink" title="更改样式表"></a>更改样式表</h3><p>如果你有什么好想法，别害羞发给我哈。</p>
<p>许多特征的想法很好，非常适合compass核心库。在这些情况下，<br>你可以创建一个罗盘的扩展。有时这是因为compass的哲学概念不合。有时这只是因为我们认为这个想法需要时间考验。。<br>Step 3: 如果你不知道如如何提交</p>
<p>Step 4: 点添加特性.</p>
<p>Step 5: 写测试发给我们.</p>
<p>Step 6: 编写文档实例给我们</p>
<p>结束</p>
<h3 id="更改ruby"><a href="#更改ruby" class="headerlink" title="更改ruby"></a>更改ruby</h3><p>如果你是对Ruby的规划工作方面的事情，假设你知道怎么读的代码，并使用标准Ruby工具，例如rake, gem, bundler, test/unit, cucumber, rspec,等。如果您有任何问题，请询问。问题随着解决。</p>
<h3 id="补丁提交"><a href="#补丁提交" class="headerlink" title="补丁提交"></a>补丁提交</h3><p>如果你有多个功能要提交，请创建一个主分支，然后合并，迭代更新。<br>    创建一个主分支:<br>$ git checkout -b new_branch_name<br>… 可以commit一下 …<br>$ git push origin new_branch_name<br>你可以看到url的改变:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">http://github.com/your_user_name/compass/commits/new_branch_name</div></pre></td></tr></table></figure></p>
<p>如果你有单提交的补丁，保存到master分支。但请记住，这些变更可能被刻意地挑选出来。<br>一旦你的变更GitHub上，确保你针对选择上游分支开发，选择包含您的更改适当的分支并发送一个pull请求。。大部分的描述应该在commit信息中–因此，没有必要写一大堆在请求消息。</p>
<h3 id="Pull-请求实例"><a href="#Pull-请求实例" class="headerlink" title="Pull 请求实例"></a>Pull 请求实例</h3><p>简单说Pull请求就是从fork到merge的整个过程</p>
<p>像compass页面的pull request由<a href="https://github.com/Compass/compass/issues" target="_blank" rel="external">管理问题</a>托管。代码审查由compass的核心团队成员维护:</p>
<p>更新被拒绝 – 更新不符合compass规范. 如果你的修改更好, 至少等到他已经到期，或者用户认可。<br>更新被拒绝, 除非 – 有时,有丢失的部分，或其他的变化需要作出的更改。建议指出要解决的问题<br>更新统一 – 更新合并到compass, 小的改动由提交者合并后提交。</p>
<h3 id="项目结构"><a href="#项目结构" class="headerlink" title="项目结构"></a>项目结构</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">compass/</div><div class="line">  core/                     - compass配置和样式核心文件.</div><div class="line">    frameworks/             - 该目录框架自动加载。</div><div class="line">      compass/              - compass框架</div><div class="line">        stylesheets/        - compass库</div><div class="line">        templates/          - compass模板和模式</div><div class="line">    test/                   - 单元测试</div><div class="line">    lib/</div><div class="line">      compass-core.rb       - compass-core ruby 库</div><div class="line">      compass/</div><div class="line">        core/</div><div class="line">          sass_extensions/  - 增强 Sass</div><div class="line">            functions/      - Sass函数 </div><div class="line">            monkey_patches/ - sass 更改</div><div class="line">        configuration/      - 支持的项目配置</div><div class="line">  cli/                      - compass命令行</div><div class="line">    bin/</div><div class="line">      compass               - CLI 可执行文件</div><div class="line">    devbin/                 - 安装包后的脚本文件</div><div class="line">    test/                   - 单元测试</div><div class="line">    features/               - compass测试</div><div class="line">    lib/</div><div class="line">      compass.rb            - compass-core ruby 库</div><div class="line">      compass/</div><div class="line">        app_integration/    - 集成app框架</div><div class="line">        commands/           - UI 不支持命令</div><div class="line">        configuration/      - 一些特殊的命令</div><div class="line">        exec/               - UI 命令</div><div class="line">        installers/         - 安装模板支持</div><div class="line">  compass-style.org/        - 文档源码</div><div class="line">    output/                 - 生成文档</div><div class="line">  <span class="keyword">import</span>-once/              - 引入Compass</div></pre></td></tr></table></figure>
<h3 id="一般哲学-其实就是规范"><a href="#一般哲学-其实就是规范" class="headerlink" title="一般哲学(其实就是规范)"></a>一般哲学(其实就是规范)</h3><p>1.用户可以指定选择器。compass永远不会强制用户使用一个样式的类名。</p>
<p>2.Compass 不需要javascript</p>
<p>3.compass核心与设计无关。这就是为什么compass没有栅格系统，因为栅格系统和设计有关。</p>
<p>4.compass并不特别，compass能做的，扩展也能做。<br>5.Sass非常棒 – compass使Sass更容易，并证明如何使用Sass充分发挥其潜力。.<br>6.浏览器的兼容很头疼。需要共同解决。<br>7.默认情况下，compass支持尽可能多的浏览器，渐进增强，向后兼容。</p>
<p>8.compass是一个Sass的试验场。watcher和 color function的例子转移到sass。</p>
<h3 id="样式约定"><a href="#样式约定" class="headerlink" title="样式约定"></a>样式约定</h3><p>1.框架所有的样式都是(私有)部分. 它们由一个下划线开始. 否则, Sass 将直接在用户的css目录创建样式表<br>2.Compass不引入额外样式. 也有例外如 resets 和 集成的基类。<br>3.Mixins 提供两个级别的默认设置<br>. 第一是一个全局默认，可以重写一次<br>. 第二个默认mixin如果包含进来，可以重写.<br>4.Mixin 参数名称的公共API部分<br>,确保易懂，不要简短.<br>5.创建一个新的文件夹放样式表, 用一个和文件夹名一样的样式表导入所有的样式表 .<br>6.尽量避免通过选择器作为参数。</p>
<h3 id="常见问题-amp-杂项信息"><a href="#常见问题-amp-杂项信息" class="headerlink" title="常见问题 &amp;杂项信息"></a>常见问题 &amp;杂项信息</h3><p>设置Git</p>
<p>请按照以下这些指示来设置您的电子邮件地址和属性的信息。.</p>
<p>下载git repo:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git clone git@github.com:your_username/compass.git</div></pre></td></tr></table></figure></p>
<p>链接远程 repo:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">cd compass</div><div class="line">git remote add chriseppstein git://github.com/chriseppstein/compass.git</div></pre></td></tr></table></figure></p>
<p>获取最近更新:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git fetch chriseppstein</div></pre></td></tr></table></figure></p>
<h3 id="在开发中使用compass"><a href="#在开发中使用compass" class="headerlink" title="在开发中使用compass"></a>在开发中使用compass</h3><p>使用本地脚本可以放在 /path/to/compass/bin/compass 。 你可以添加 /path/to/compass/bin 到$PATH(环境变量), 或者选择其他目录.<br>创建安装gem:<br>编辑 VERSION 改变 version像这样: 1.0.0.something-unique-to-me.0<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">gem build compass.gemspec</div><div class="line">gem install compass-0.10.6.something-uniq-to-me.0.gem</div></pre></td></tr></table></figure></p>
<p>– 如果安装gems到你的系统, 你可能需要用 sudo . 如果你不明白什么意思，就加上它(sudo意思就是superuser<br> do 的缩写)<br>捆绑环境, 你可以像这样用gem安装compass:<br>``linux<br>gem ‘compass’, :path =&gt; “/Users/myusername/some/path/to/compass”<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">ruby将自动执行捆绑命令</div><div class="line"></div><div class="line">配置ruby目录 . ruby的加载路径可以这么设置</div><div class="line">```linux</div><div class="line">export RUBYLIB=/Users/myusername/some/path/to/compass/lib</div></pre></td></tr></table></figure></p>
<h3 id="运行测试"><a href="#运行测试" class="headerlink" title="运行测试"></a>运行测试</h3><p> 你必须安装Ruby到你的系统. 配置完git, 切换到root目录通过git checkout到compass分支<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cd compass</div></pre></td></tr></table></figure></p>
<p>捆绑安装Ruby gem.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gem install bundler</div></pre></td></tr></table></figure></p>
<p>用sudo安装gems, </p>
<p>配置依赖:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">bundle install --binstubs devbin</div></pre></td></tr></table></figure></p>
<p>核心库和样式测试:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">bundle exec rake test features</div></pre></td></tr></table></figure></p>
<p>运行性能测试<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">./devbin/cucumber</div></pre></td></tr></table></figure></p>
<p>如果样式测试失败, 捕获输出的测试项目在<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">test/fixtures/stylesheets/&lt;project&gt;/saved/</div></pre></td></tr></table></figure></p>
<h3 id="编写样式测试"><a href="#编写样式测试" class="headerlink" title="编写样式测试"></a>编写样式测试</h3><p>Compass已经对每个样式表测试, 直接可以导入任何其他依赖关系和重构，不会影响到输出.</p>
<p>在某种程度上，在不同的浏览器测试是一项巨大工程。如果你有想法，请让我们知道如何做到这一点<br>在test/fixtures/stylesheets目录, 有许多的compass项目. 测试添加更新文件,修改错误保证他们都通过. 安全起见，它可能错过一些问题。如果您添加一个新的样式表到compass，请确保添加一个新样式表，增加新的样式规则。</p>
<h3 id="重新选择或重新定位-我们该怎么办"><a href="#重新选择或重新定位-我们该怎么办" class="headerlink" title="重新选择或重新定位. 我们该怎么办?"></a>重新选择或重新定位. 我们该怎么办?</h3><p>根据任何数目的原因，包括但不限于星星多少，您的更改不会简单合并到compass。例如，我们会考虑master的稳定，而不是改变的地方，或者我们可以把所有同类更改合并在一起，形成一个单一的提交在时间，或者我们可能希望改变你已经提交，它被安置到顶部但没有改变。在这些情况下，有两种方法你有两种选择:</p>
<p>1.如果您有一些变化的一个分支，尚未接受，但其他分支上的变化被接受，那么您应该运行以下命令（确保fetch最新）:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git checkout branch_name; git rebase chriseppstein/master</div><div class="line">(假设的变化应用到主分支)</div></pre></td></tr></table></figure></p>
<p>2.<br>如果你所有在分支的改变被接受或你不想再保留:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git checkout master; git branch -D branch_name; git push origin :branch_name</div></pre></td></tr></table></figure></p>
<h2 id="创建Compass扩展"><a href="#创建Compass扩展" class="headerlink" title="创建Compass扩展"></a>创建Compass扩展</h2><h3 id="Compass扩展"><a href="#Compass扩展" class="headerlink" title="Compass扩展"></a>Compass扩展</h3><p>Compass,其核心，是在Sass基础上建立的框架。它是提供创建，安装和可重复使用的样式表的工具，它提供从全面布局小部件框架设计，甚至整页的设计。Sass让HTML页面的语义明确的和设计细节省力。<br>本文档描述了compass扩展的工具集，这样您就可以建立你自己的compass的扩展。</p>
<p>基础布局</p>
<p>my_extension<br>|<br>|- stylesheets (sass加载路径)<br>|  |<br>|  |- my_extension (not technically required, but it’s good to scope imports by the name of the extension)<br>|  |  |<br>|  |  |- _module_one.sass (this file would be imported using @import my_extension/module_one.sass)<br>|  |  |- _module_two.sass (this file would be imported using @import my_extension/module_two.sass)<br>|  |  |- …<br>|  |<br>|  |- _my_extension.sass (This file will import the entire extension using @import my_extension.sass)<br>|<br>|- templates (this is where templates/patterns go)<br>|  |<br>|  |- project (this should be provided if you’d like people to be able to base their project on the extension)<br>|  |  |<br>|  |  |- manifest.rb (this file should declare the contents of the template)<br>|  |  |- screen.sass (this would be the main stylesheet, importing from your extension and demonstrating its use)<br>|  |  |- print.sass (this file would set up basic print styles)<br>|  |  |- ie.sass (if you want, you can provide custom styles for IE)<br>|  |<br>|  |- some_pattern<br>|     |<br>|     |- manifest.rb<br>|     |- some.sass (some sass is probably in order, always import from the extension library as much as possible)<br>|     |- some_script.js (yes, you can provide javascript code)<br>|     |- some_image.png (and images)<br>|     |- some_content.html.haml (and even html and haml)<br>|     |- some_other_file.txt (and other arbitrary files)<br>|<br>|- lib (optional ruby code)<br>   |<br>   |- my_extension.rb (this code can register your framework if you deviate from conventions and require sass extensions, etc.)<br>   |- compass-my_extension.rb (This file is automatically required by compass if it is present. Avoiding the need to pass -r to the compass command line tool.)<br>   |<br>   |- my_extension<br>      |<br>      |- sass_extensions.rb (this is the standard location to place sass functions)<br>Names in bold are part of the extension naming convention.</p>
<p>Generating an Extension</p>
<p>If you want a leg up to get started working on your extension, you can use compass to generate an extension with the following command:</p>
<p>compass create my_extension –using compass/extension<br>This will create a few basic files and folders to get you started.</p>
<p>If you prefer to use the scss syntax for your extension run the following command instead:</p>
<p>compass create my_extension –using compass/extension -x scss<br>Advanced Layout Options</p>
<p>Library File Location</p>
<p>The extension library file referenced above as my_extension/lib/my_extension.rb can actually be stored at any of the following three locations:</p>
<p>my_extension/compass_init.rb<br>my_extension/lib/my_extension.rb (NOTE: You must use this one if you’re distributing as a rubygem.)<br>my_extension/my_extension.rb<br>The first of those locations found (in the above order) will be loaded. The compass_init.rb file takes priority, so that extensions that want to work differently as compass extensions than they do as normal ruby libraries, have a way of targeting compass.</p>
<p>Stylesheet and Template Locations</p>
<p>If you’d like to store your stylesheets and/or templates in a non-standard location within your extension, you must provide a library file and register the extension explicitly like so:</p>
<p>base_directory  = File.join(File.dirname(<strong>FILE</strong>), ‘..’)<br>stylesheets_dir = File.join(base_directory, ‘my’, ‘stylesheets’)<br>templates_dir   = File.join(base_directory, ‘my’, ‘templates’)<br>Compass::Frameworks.register(‘my_extension’, :stylesheets_directory =&gt; stylesheets_dir, :templates_directory =&gt; templates_dir)<br>If you’re following the standard naming convention, but the stylesheet and template directories are not at the top level, you can just do this instead:</p>
<p> path from the library file to where you’re keeping your compass stuff.<br>base_directory  = File.join(File.dirname(<strong>FILE</strong>), ‘..’, ‘compass’)<br>Compass::Frameworks.register(‘my_extension’, :path =&gt; base_directory)<br>Adding Configuration Options to Compass</p>
<p>For details on how to add new configuration options to compass read this.</p>
<p>Conventions to Follow</p>
<p>The following are not required, but are standards that your framework should attempt to adhere to unless there’s a good reason not to do so.</p>
<p>Have a single import for your framework.<br>Break up your framework into modules so that people can import just smaller pieces for faster load times when they’re not using everything.<br>Use partials (files starting with an underscore) for stylesheets that are meant to be imported. If you do not Sass will generate css files for your libraries in some configurations.<br>Provide a project template. If you do not, your project should only be providing widgets or page designs, etc.<br>Building a Template (a.k.a. Pattern)<br>Manifest Files</p>
<p>The manifest file declares the template contents and tells compass information about the files in the template.</p>
<p>An Example Manifest File</p>
<p>description “My awesome compass plugin.”</p>
<p>stylesheet ‘screen.sass’, :media =&gt; ‘screen, projection’<br>stylesheet ‘partials/_base.sass’<br>stylesheet ‘print.sass’,  :media =&gt; ‘print’<br>stylesheet ‘ie.sass’,     :media =&gt; ‘screen, projection’, :condition =&gt; “lt IE 8”</p>
<p>image ‘grid.png’<br>javascript ‘script.js’</p>
<p>html ‘welcome.html.haml’, :erb =&gt; true<br>file ‘README’</p>
<p>help %Q{<br>This is a message that users will see if they type</p>
<p>  compass help my_extension</p>
<p>You can use it to help them learn how to use your extension.<br>}</p>
<p>welcome_message %Q{<br>This is a message that users will see after they install this pattern.<br>Use this to tell users what to do next.<br>}<br>You may also see some real manifest files here:</p>
<p>blueprint<br>compass-css-lightbox<br>Manifest Declarations</p>
<p>Easy Mode: If you just have some basic files and nothing fancy going on, simply place this line in your manifest:</p>
<p>discover :all<br>If the file is missing discover :all is the default</p>
<p>This will cause compass to find all the files in your template and use the files’ extension to determine where they should go. Alternatively, you can request that compass only discover files of a certain type. For example, the following will only discover javascript and image assets, you could then declare other file types on your own.</p>
<p>discover :javascripts<br>discover :images<br>The following types may be discovered: :stylesheets, :images, :javascripts, :fonts, :html, :files, and :directories</p>
<p>Normal Mode: There are seven kinds of manifest declarations:</p>
<p>stylesheet - Declares a sass file.<br>image - Declares an image.<br>javascript - Declares a javascript file.<br>font - Declares a font file.<br>html - Declares an html file.<br>file - Declares a random file.<br>directory - Declares a directory should be created.<br>All declarations take the path to the file as their first argument. Note that the normal slash / can and should be used in a manifest. Compass will take care of the cross platform issues. The path to the file will be reproduced in the user’s project, so please keep that in mind when creating folders. The location where files are going to be installed is dictated by the user’s project configuration, however, a template can place things into subdirectories relative to those locations.</p>
<p>Common options:</p>
<p>:erb - When set to true, the file will be processed via the ERB templating language. See the “Advanced Manifests” section below for more details.<br>:to - The location where the file should be installed relative to the type-specific location.<br>:like - Most often used with a file declaration, this option allows you to install into the location of another manifest type (and also :css). E.g. :like =&gt; :css<br>Stylesheet options:</p>
<p>:media - this is used as a hint to the user about the media attribute of the stylesheet link tag.<br>:condition - this is used to hint the user that a conditional comment should be used to import the stylesheet with the given condition.<br>Directory options:</p>
<p>:within - where the directory should be created. If omitted, the directory will be relative to the project directory. Can be one of: the following<br>sass_dir<br>javascripts_dir<br>fonts_dir<br>images_dir<br>HTML files:</p>
<p>You can provide html as haml or as plain html. If you provide haml, the haml will be converted to html when it is installed, unless the project allows haml files. Providing html files is usually done to demonstrate how to use a more complicated design and to get the user started off with working product.</p>
<p>Advanced Manifests and Templates</p>
<p>ERB Processing - This can be used to customize the contents of the file in an extension template. The template will be processed in the context of a TemplateContext instance, which gives you access to the full project configuration information as well as the command line options. Since it’s unlikely many templates will need this functionality, I leave it as an exercise of the user to figure it out and if they can’t to contact the compass-devs mailing list for assistance.<br>no_configuration_file! - calling this method within the manifest will tell the installer to skip the creation of a configuration file.<br>skip_compilation! - calling this method within the manifest will tell the installer to skip compilation of sass files to css.<br>Distributing Extensions as Ruby Gems</p>
<p>Rubygems is a flexible, easy-to-use system for distributing ruby software. If you have any questions about rubygems, I suggest that you start looking for help here.</p>
<p>The big advantages of using rubygems to distribute your extension is that it allows your extension to be a dependency for other projects and that each install is versioned, which makes supporting your extension easier.</p>
<p>If distributing as a rubygem, it is a good idea to have a file compass-<framework>.rb in your lib directory that registers the compass framework. This will allow compass to automatically require the framework from within rubygems.</framework></p>
<p>Tips for Developing Extensions</p>
<p>If you’re developing a simple extension, you may find it convenient to place your extension within an existing compass project in the extension folder.<br>Never specify an extension in your imports as this can cause issue when the syntax of a file changes.<br>Packaging an Extension as a RubyGem</p>
<p>You do not have to make your extension a ruby gem. But if you do, you get some benefits you would not have otherwise:</p>
<p>Releases<br>Versions<br>A standard way of asking your users what release they are using.<br>Better integration with ruby-based projects via tools like Bundler.<br>Creating a Gem</p>
<p>Before you begin, please ensure you have gem version 1.3.6 or greater. gem -v will tell you the currently installed version.</p>
<p>Define your gemspec file at the top of your extension. Here’s an example of one. The gemspec should have the same name as your gem.<br>Register your framework by adding lib/my_extension.rb and registering it:</p>
<p>require ‘compass’<br>extension_path = File.expand_path(File.join(File.dirname(<strong>FILE</strong>), “..”))<br>Compass::Frameworks.register(‘my_extension’, :path =&gt; extension_path)<br>This is how compass knows where to find your extension’s files when a user requires it. For more options, go back up and read about Stylesheet and Template Locations.</p>
<p>Build a gem: gem build my_extension.gemspec. This will build your gem file and add the current version to the name. E.g. my_extension-0.0.1.gem<br>Test your gem by installing it locally: gem install my_extension-0.0.1.gem<br>Releasing a Gem</p>
<p>The ruby community is nice and will host your gem files for free. To release your gem:</p>
<p>gem push my_extension-0.0.1.gem<br>Your ruby gem will be hosted on rubygems.org. Please familiarize yourself with their documentation.</p>
<p>Installing Extensions<br>How extensions are installed varies according to the decisions you make about how you are packaging and releasing your gem. There will be a standard approach in a future release, but until then, it is suggested that you provide your users with succinct installation instructions.</p>
<p>Installing Extensions Released as RubyGems</p>
<p>When creating a new project:</p>
<p>sudo gem install my_extension<br>compass create my_project -r my_extension –using my_extension<br>The -r option is annoying and will not be needed in a future version of compass. But for now, it tells compass to find and load the extension from the local rubygems repository.</p>
<p>To install via rubygems into an existing project:</p>
<p>gem install my_extension<br> edit the project configuration file and add:<br>require ‘my_extension’<br>compass install my_extension<br>Or if you have other patterns besides the project pattern:</p>
<p>compass install my_extension/pattern<br>Installing Ad-hoc Extensions</p>
<p>Ad-hoc extensions are any set of files and folders following the basic conventions described above. They could be installed via a zip file or by checking the code out from source control. Ad-hoc extensions will be automatically found in the extensions directory of a project and registered for import without needing a require statement in the compass configuration file.</p>
<p>Currently, ad-hoc extensions can only be installed into the extensions directory of an existing compass project. This will be fixed in a future release of compass. Until then, you may need to instruct your users to create a bare project to get started:</p>
<p>compass create my_project –bare<br>This will create a project directory, a sass directory (with no sass files) and a configuration file.</p>
<p>The standard location for extensions is project_root/extensions for stand-alone projects and project_root/vendor/plugins/compass_extensions for rails projects. Additionally, the user may customize their extensions directory by setting extensions_dir in their compass configuration file.</p>
<p>To install into an existing project, simply place the extension into a project’s extension directory. This could be done via a git clone or by extracting an archive. The name of the directory it creates should be the name of the extension. The project will now have access to the extension.</p>
<p>Verifying that an Extension is Installed Correctly</p>
<p>The user can verify that they have access to your extension by typing:</p>
<p>compass help<br>And they should see the framework in the list of available frameworks. Alternatively, if you’ve provided a help message in the manifest, then the user can type:</p>
<p>compass help my_extension</p>
<ul>
<li>or -<br>compass help my_extension/pattern_name<br>Note: The user might need to provide the -r option to help in order for compass to find a gem-based extension before a project exists. This is not needed for extensions installed into the extensions directory, or if the project is already required in the current directory’s project configuration.<h2 id="Extending-Compass"><a href="#Extending-Compass" class="headerlink" title="Extending Compass"></a>Extending Compass</h2><h2 id="Production-Stylesheets"><a href="#Production-Stylesheets" class="headerlink" title="Production Stylesheets"></a>Production Stylesheets</h2><h2 id="Spriting"><a href="#Spriting" class="headerlink" title="Spriting"></a>Spriting</h2><h3 id="Customization"><a href="#Customization" class="headerlink" title="Customization"></a>Customization</h3><h3 id="Magic-Selectors"><a href="#Magic-Selectors" class="headerlink" title="Magic Selectors"></a>Magic Selectors</h3><h3 id="Sprite-layouts"><a href="#Sprite-layouts" class="headerlink" title="Sprite layouts"></a>Sprite layouts</h3><h2 id="Testing"><a href="#Testing" class="headerlink" title="Testing"></a>Testing</h2><h2 id="Upgrading"><a href="#Upgrading" class="headerlink" title="Upgrading"></a>Upgrading</h2><h3 id="Lemonade-Upgrade"><a href="#Lemonade-Upgrade" class="headerlink" title="Lemonade Upgrade"></a>Lemonade Upgrade</h3><h3 id="Scared-to-Upgrade"><a href="#Scared-to-Upgrade" class="headerlink" title="Scared to Upgrade?"></a>Scared to Upgrade?</h3><h3 id="Upgrading-to-v0-11"><a href="#Upgrading-to-v0-11" class="headerlink" title="Upgrading to v0.11"></a>Upgrading to v0.11</h3><h2 id="Working-with-Configurable-Variables"><a href="#Working-with-Configurable-Variables" class="headerlink" title="Working with Configurable Variables"></a>Working with Configurable Variables</h2><h1 id="Examples"><a href="#Examples" class="headerlink" title="Examples"></a>Examples</h1><h1 id="Documentation"><a href="#Documentation" class="headerlink" title="Documentation"></a>Documentation</h1><h1 id="Support"><a href="#Support" class="headerlink" title="Support"></a>Support</h1><h1 id="Bugs"><a href="#Bugs" class="headerlink" title="Bugs"></a>Bugs</h1></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;开始&quot;&gt;&lt;a href=&quot;#开始&quot; class=&quot;headerlink&quot; title=&quot;开始&quot;&gt;&lt;/a&gt;开始&lt;/h1&gt;&lt;p&gt;compass目前已经不再维护，但有些东西仍值得学习。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Version: 1.0.1&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;开始使用Compass&quot;&gt;&lt;a href=&quot;#开始使用Compass&quot; class=&quot;headerlink&quot; title=&quot;开始使用Compass&quot;&gt;&lt;/a&gt;开始使用Compass&lt;/h2&gt;&lt;p&gt;Compass 是一款使用&lt;a href=&quot;http://sass-lang.com&quot;&gt;Sass语言&lt;/a&gt; 编写的开源的css设计框架，使用&lt;br&gt;起来强大和简单. 如果你对Sass不熟悉, 可以去&lt;a href=&quot;http://sass-lang.com&quot;&gt;sass-lang.com&lt;/a&gt;学习如何使用.&lt;/p&gt;
&lt;h2 id=&quot;安装Compass&quot;&gt;&lt;a href=&quot;#安装Compass&quot; class=&quot;headerlink&quot; title=&quot;安装Compass&quot;&gt;&lt;/a&gt;安装Compass&lt;/h2&gt;&lt;p&gt;请按照&lt;a href=&quot;http://compass-style.org/install/&quot;&gt;Compass 安装指南&lt;/a&gt;按步骤安装Compass和Sass。&lt;/p&gt;
&lt;p&gt;如果需要验证版本，可以运行以下命令:&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;$ compass version&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
      <category term="compass" scheme="http://sunhao.win/tags/compass/"/>
    
  </entry>
  
</feed>
